Automates the job search process by extracting job postings based on specific filters and storing them in both a Google Sheet and a PostgreSQL database.
	This n8n workflow was built entirely by me, with no templates used.

N8N workflow in json:

{
  "name": "Job listings - All",
  "nodes": [
    {
      "parameters": {
        "jsCode": "// Enhanced GIZ Job Scraper with Deadline Fetching for n8n\n// Use this in a Code node in n8n\n\nconst puppeteer = require('puppeteer');\n\n// Convert date from DD.MM.YYYY to MM/DD/YY format\nfunction convertDateFormat(dateStr) {\n  if (!dateStr || dateStr.trim() === '') return '';\n  \n  try {\n    // Match DD.MM.YYYY pattern\n    const match = dateStr.match(/(\\d{2})\\.(\\d{2})\\.(\\d{4})/);\n    if (match) {\n      const day = match[1];\n      const month = match[2];\n      const year = match[3].slice(-2); // Get last 2 digits of year\n      return `${month}/${day}/${year}`;\n    }\n    return dateStr; // Return original if pattern doesn't match\n  } catch (error) {\n    console.error('Error converting date:', error.message);\n    return dateStr;\n  }\n}\n\n// Fetch deadline from individual job page\nasync function fetchJobDeadline(page, jobLink) {\n  try {\n    console.log(`Fetching deadline from: ${jobLink}`);\n    \n    await page.goto(jobLink, {\n      waitUntil: 'networkidle0',\n      timeout: 30000\n    });\n    \n    await new Promise(resolve => setTimeout(resolve, 2000));\n    \n    const deadline = await page.evaluate(() => {\n      // Try the specific CSS selector first\n      const timeElement = document.querySelector('#content > main > form > div > div > div.jobboard-datatable.jobboard-widget > div.jb-datatable-body > div.jb-datatable-list > table > tbody > tr > td:nth-child(4) > time');\n      \n      if (timeElement) {\n        return timeElement.textContent?.trim() || '';\n      }\n      \n      // Fallback: Look for any time element in the 4th column\n      const fourthColumnTime = document.querySelector('table tbody tr td:nth-child(4) time');\n      if (fourthColumnTime) {\n        return fourthColumnTime.textContent?.trim() || '';\n      }\n      \n      // Fallback: Look for deadline-related text\n      const allTimeElements = document.querySelectorAll('time');\n      for (const timeEl of allTimeElements) {\n        const text = timeEl.textContent?.trim() || '';\n        if (text.match(/\\d{2}\\.\\d{2}\\.\\d{4}/)) {\n          return text;\n        }\n      }\n      \n      // Last fallback: Search for deadline keywords\n      const bodyText = document.body.textContent || '';\n      const deadlineMatch = bodyText.match(/Bewerbungsfrist[:\\s]*(\\d{2}\\.\\d{2}\\.\\d{4})/i) ||\n                           bodyText.match(/Deadline[:\\s]*(\\d{2}\\.\\d{2}\\.\\d{4})/i) ||\n                           bodyText.match(/bis[:\\s]*(\\d{2}\\.\\d{2}\\.\\d{4})/i);\n      \n      if (deadlineMatch) {\n        return deadlineMatch[1];\n      }\n      \n      return '';\n    });\n    \n    if (deadline) {\n      const convertedDeadline = convertDateFormat(deadline);\n      console.log(`Found deadline: ${deadline} â†’ ${convertedDeadline}`);\n      return convertedDeadline;\n    } else {\n      console.log('No deadline found on job page');\n      return '';\n    }\n    \n  } catch (error) {\n    console.error(`Error fetching deadline from ${jobLink}:`, error.message);\n    return '';\n  }\n}\n\n// Check if there's a next page available\nasync function checkForNextPage(page, currentPage) {\n  return await page.evaluate((currentPage) => {\n    const paginationInfo = {\n      hasNextPage: false,\n      nextPageElement: null,\n      method: null,\n      debugInfo: []\n    };\n\n    const specificNextButton = document.querySelector('#pagination-container-bottom > li:nth-child(7) > a > span.next');\n    \n    if (specificNextButton) {\n      const parentAnchor = specificNextButton.closest('a');\n      \n      if (parentAnchor && parentAnchor.getAttribute('href')) {\n        const href = parentAnchor.getAttribute('href');\n        const listItem = specificNextButton.closest('li');\n        const isDisabled = listItem?.classList.contains('disabled') || \n                          parentAnchor.classList.contains('disabled') ||\n                          specificNextButton.classList.contains('disabled');\n        \n        if (!isDisabled && href && href !== '#' && href !== 'javascript:void(0)') {\n          paginationInfo.hasNextPage = true;\n          paginationInfo.nextPageElement = {\n            tag: parentAnchor.tagName,\n            text: specificNextButton.textContent?.trim() || '>>',\n            href: href,\n            selector: '#pagination-container-bottom > li:nth-child(7) > a'\n          };\n          paginationInfo.method = 'specific-selector';\n          return paginationInfo;\n        }\n      }\n    }\n\n    const paginationContainer = document.querySelector('#pagination-container-bottom');\n    if (paginationContainer) {\n      const nextElements = paginationContainer.querySelectorAll('a[href], .next, [class*=\"next\"]');\n      \n      for (const element of nextElements) {\n        const href = element.getAttribute('href');\n        const text = element.textContent?.trim() || '';\n        const isDisabled = element.closest('li')?.classList.contains('disabled') || \n                          element.classList.contains('disabled');\n        \n        if (!isDisabled && href && href !== '#' && \n            (text.includes('>') || text.includes('next') || text.includes('weiter') || \n             element.classList.contains('next') || element.querySelector('.next'))) {\n          \n          paginationInfo.hasNextPage = true;\n          paginationInfo.nextPageElement = {\n            tag: element.tagName,\n            text: text,\n            href: href\n          };\n          paginationInfo.method = 'container-search';\n          return paginationInfo;\n        }\n      }\n    }\n\n    return paginationInfo;\n  }, currentPage);\n}\n\n// Navigate to the next page\nasync function navigateToNextPage(page, paginationInfo) {\n  try {\n    const nextElement = paginationInfo.nextPageElement;\n    \n    if (nextElement.href && !nextElement.href.includes('javascript:')) {\n      let nextUrl = nextElement.href;\n      \n      if (!nextUrl.startsWith('http')) {\n        if (nextUrl.startsWith('/')) {\n          nextUrl = `https://jobs.giz.de${nextUrl}`;\n        } else {\n          const currentUrl = new URL(page.url());\n          nextUrl = `${currentUrl.protocol}//${currentUrl.host}/${nextUrl}`;\n        }\n      }\n      \n      await page.goto(nextUrl, { \n        waitUntil: 'networkidle0', \n        timeout: 30000 \n      });\n      return true;\n    }\n    \n    return false;\n  } catch (navigationError) {\n    console.error('Navigation error:', navigationError.message);\n    return false;\n  }\n}\n\n// Extract jobs from the current page\nasync function extractJobsFromCurrentPage(page, pageNumber) {\n  return await page.evaluate((pageNumber) => {\n    const extractedJobs = [];\n    const tableRows = document.querySelectorAll('table tr, .job-list tr, .vacancy-list tr');\n    \n    tableRows.forEach((row) => {\n      try {\n        const jobLink = row.querySelector('a[href*=\"jobad\"], a[href*=\"job\"], a[href*=\"vacancy\"]');\n        if (!jobLink) return;\n        \n        const href = jobLink.getAttribute('href');\n        if (!href || href === '#' || href === 'javascript:void(0)') return;\n        \n        const cells = row.querySelectorAll('td, .cell, .column');\n        \n        let title = jobLink.textContent?.trim() || '';\n        let link = href;\n        let location = '';\n        let field = '';\n        \n        if (link && !link.startsWith('http')) {\n          link = link.startsWith('/') ? `https://jobs.giz.de${link}` : `https://jobs.giz.de/${link}`;\n        }\n        \n        if (cells.length >= 2) {\n          for (let i = 1; i < cells.length && i < 4; i++) {\n            const cellText = cells[i]?.textContent?.trim() || '';\n            \n            if (i === 1 || cellText.match(/\\b(Germany|Deutschland|Ghana|Kenya|India|Morocco)\\b/i)) {\n              location = location || cellText;\n            } else if (!field) {\n              field = cellText;\n            }\n          }\n        }\n        \n        if (title && title.length > 3 && link) {\n          extractedJobs.push({\n            title: title,\n            link: link,\n            location: location || '',\n            field: field || '',\n            deadline: '',\n            pageNumber: pageNumber,\n            scrapedAt: new Date().toISOString()\n          });\n        }\n      } catch (error) {\n        console.log(`Error processing row:`, error.message);\n      }\n    });\n    \n    return extractedJobs;\n  }, pageNumber);\n}\n\n// Main scraping function with deadline fetching\nasync function scrapeGIZJobsWithDeadlines() {\n  const browser = await puppeteer.launch({\n    headless: true,\n    args: [\n      '--no-sandbox', \n      '--disable-setuid-sandbox',\n      '--disable-dev-shm-usage',\n      '--disable-gpu'\n    ]\n  });\n  \n  const page = await browser.newPage();\n  let allJobs = [];\n  let currentPage = 1;\n  let maxPages = 50;\n  \n  try {\n    await page.setUserAgent('Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36');\n    \n    console.log('Starting GIZ job scraping with pagination and deadline fetching...');\n    await page.goto('https://jobs.giz.de/index.php?ac=search_result&search_criterion_activity_level%5B%5D=1014&search_criterion_entry_level%5B%5D=17', {\n      waitUntil: 'networkidle0',\n      timeout: 30000\n    });\n\n    await new Promise(resolve => setTimeout(resolve, 5000));\n\n    // Phase 1: Collect all job listings\n    while (currentPage <= maxPages) {\n      console.log(`\\n=== Processing Page ${currentPage} ===`);\n      \n      const pageJobs = await extractJobsFromCurrentPage(page, currentPage);\n      console.log(`Page ${currentPage}: Found ${pageJobs.length} jobs`);\n      \n      if (pageJobs.length === 0) break;\n      \n      allJobs = allJobs.concat(pageJobs);\n\n      const paginationInfo = await checkForNextPage(page, currentPage);\n      \n      if (!paginationInfo.hasNextPage) {\n        console.log(`No more pages available. Stopping at page ${currentPage}.`);\n        break;\n      }\n\n      const navigationSuccess = await navigateToNextPage(page, paginationInfo);\n      if (!navigationSuccess) break;\n\n      currentPage++;\n      await new Promise(resolve => setTimeout(resolve, 4000));\n      \n      if (currentPage > maxPages) break;\n    }\n\n    // Remove duplicates\n    const uniqueJobs = [];\n    const seenLinks = new Set();\n    \n    allJobs.forEach(job => {\n      if (!seenLinks.has(job.link)) {\n        seenLinks.add(job.link);\n        uniqueJobs.push(job);\n      }\n    });\n\n    console.log(`\\n=== Phase 1 Complete ===`);\n    console.log(`Total unique jobs found: ${uniqueJobs.length}`);\n    \n    // Phase 2: Fetch deadlines for each job\n    console.log(`\\n=== Phase 2: Fetching Deadlines ===`);\n    \n    for (let i = 0; i < uniqueJobs.length; i++) {\n      const job = uniqueJobs[i];\n      console.log(`\\n[${i + 1}/${uniqueJobs.length}] Processing: ${job.title}`);\n      \n      const deadline = await fetchJobDeadline(page, job.link);\n      job.deadline = deadline;\n      \n      // Small delay between requests to be respectful\n      await new Promise(resolve => setTimeout(resolve, 2000));\n    }\n\n    await browser.close();\n\n    console.log(`\\n=== SCRAPING COMPLETE ===`);\n    console.log(`Total jobs with deadlines: ${uniqueJobs.length}`);\n    console.log(`Jobs with deadlines found: ${uniqueJobs.filter(j => j.deadline).length}`);\n\n    return uniqueJobs.map(job => ({ json: job }));\n\n  } catch (error) {\n    await browser.close();\n    console.error('Error scraping jobs:', error);\n    return [];\n  }\n}\n\n// Execute the scraping function\nreturn await scrapeGIZJobsWithDeadlines();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1080,
        1120
      ],
      "id": "9bb940d6-98bf-407b-bcad-54a6dc974ce5",
      "name": "GIZ"
    },
    {
      "parameters": {
        "jsCode": "// World Bank Job Scraper with Pagination and Deadline + Location Fetching for n8n\n// Use this in a Code node in n8n with Puppeteer library enabled\n\nconst puppeteer = require('puppeteer');\n\n// Configuration - Update this URL as needed\nconst START_URL = 'https://worldbankgroup.csod.com/ux/ats/careersite/1/home?c=worldbankgroup&cfdd[0][id]=47&cfdd[0][options][0]=3403&country=us_in';\n\n// Wait for job listings to load\nasync function waitForJobListings(page) {\n  try {\n    await page.waitForSelector('[class*=\"job\"], [class*=\"position\"], [class*=\"requisition\"], a[href*=\"jobdetail\"]', {\n      timeout: 30000\n    });\n    \n    await new Promise(resolve => setTimeout(resolve, 3000));\n    return true;\n  } catch (error) {\n    console.log('Timeout waiting for job listings, attempting to proceed anyway');\n    return false;\n  }\n}\n\n// Fetch deadline and location from individual job detail page\nasync function getJobDetailsFromPage(page, job) {\n  try {\n    console.log(`\\nFetching details for: ${job.title}`);\n    console.log(`Navigating to: ${job.link}`);\n    \n    await page.goto(job.link, {\n      waitUntil: 'networkidle2',\n      timeout: 30000\n    });\n    \n    // Wait for job detail page to load - try multiple potential selectors\n    try {\n      await Promise.race([\n        page.waitForSelector('[class*=\"requisition-title\"]', { timeout: 10000 }),\n        page.waitForSelector('h1', { timeout: 10000 }),\n        page.waitForSelector('[class*=\"job-detail\"]', { timeout: 10000 }),\n        page.waitForSelector('[class*=\"job-description\"]', { timeout: 10000 })\n      ]);\n    } catch (waitError) {\n      console.log('Standard selectors not found, proceeding anyway...');\n    }\n    \n    // Additional wait for dynamic content\n    await new Promise(resolve => setTimeout(resolve, 2000));\n    \n    const details = await page.evaluate(() => {\n      let deadline = '';\n      let location = '';\n      \n      // === Extract Location ===\n      // Strategy 1: Try the specific CSS selector provided\n      const locationElement = document.querySelector('#cs-root > div > div.p-view-pagetemplate > div.p-panel.p-bg-grey80 > div > div > div > div > div > div > div.p-content-wrapper > div.p-panel.p-p-v-lg > div > div > div.p-gridcol.col-12-device-none.col-9-device-sm > div > div:nth-child(3) > div > div > div > p.p-text.p-f-sz-sm.p-t-default.p-f-w-n');\n      \n      if (locationElement) {\n        location = locationElement.textContent?.trim() || '';\n        console.log('Found location using specific selector:', location);\n      }\n      \n      // Strategy 2: Look for location in common patterns if specific selector fails\n      if (!location) {\n        const allElements = document.querySelectorAll('p, span, div, td, li');\n        \n        for (const element of allElements) {\n          const text = element.textContent?.trim() || '';\n          const className = element.className || '';\n          \n          // Check if this is a location field\n          if (className.includes('location') || \n              text.match(/^[A-Z][a-z]+,\\s*[A-Z]{2,}$/) || // City, Country pattern\n              text.match(/^[A-Z][a-z\\s]+,\\s*[A-Z][a-z\\s]+$/)) { // City Name, Country Name\n            \n            // Make sure it's not too long (probably not a location then)\n            if (text.length < 100 && text.length > 3) {\n              location = text;\n              console.log('Found location using pattern matching:', location);\n              break;\n            }\n          }\n        }\n      }\n      \n      // Strategy 3: Look for \"Location:\" label\n      if (!location) {\n        const locationLabels = Array.from(document.querySelectorAll('*')).filter(el => {\n          const text = el.textContent?.trim() || '';\n          return text === 'Location:' || text === 'Location' || text === 'Lieu :';\n        });\n        \n        for (const label of locationLabels) {\n          const nextElement = label.nextElementSibling;\n          if (nextElement) {\n            const nextText = nextElement.textContent?.trim() || '';\n            if (nextText && nextText.length < 100) {\n              location = nextText;\n              console.log('Found location using label:', location);\n              break;\n            }\n          }\n          \n          // Check parent's next sibling\n          const parentNext = label.parentElement?.nextElementSibling;\n          if (parentNext) {\n            const parentNextText = parentNext.textContent?.trim() || '';\n            if (parentNextText && parentNextText.length < 100) {\n              location = parentNextText;\n              console.log('Found location using parent label:', location);\n              break;\n            }\n          }\n        }\n      }\n      \n      // === Extract Deadline ===\n      // Strategy 1: Try the SPECIFIC CSS selector first (PRIORITY)\n      const deadlineElement = document.querySelector('#cs-root > div > div.p-view-pagetemplate > div.p-panel.p-bg-grey80 > div > div > div > span > div > div > div > div.p-image-banner-content-wrapper > div > div > div > div > div > div > div > div:nth-child(4) > div > div > span');\n      \n      if (deadlineElement) {\n        const deadlineText = deadlineElement.textContent?.trim() || '';\n        if (deadlineText) {\n          console.log('Found deadline using specific CSS selector:', deadlineText);\n          deadline = deadlineText;\n        }\n      }\n      \n      // Strategy 2: Look for \"Closing Date:\" field in the job details (if specific selector failed)\n      if (!deadline) {\n        const allText = document.body.textContent || '';\n        \n        // Match \"Closing Date:\" followed by date in MM/DD/YYYY format\n        const closingDateMatch = allText.match(/Closing Date:\\s*\\n\\s*\\n\\s*(\\d{2}\\/\\d{2}\\/\\d{4})\\s*\\(MM\\/DD\\/YYYY\\)/);\n        \n        if (closingDateMatch) {\n          const dateStr = closingDateMatch[1];\n          console.log('Found closing date:', dateStr);\n          deadline = dateStr;\n        }\n      }\n      \n      // Strategy 3: Look for \"Date limite de candidature\" text pattern\n      if (!deadline) {\n        const allElements = document.querySelectorAll('p, span, div, td, li');\n        \n        for (const element of allElements) {\n          const text = element.textContent?.trim() || '';\n          \n          // Match the exact French pattern\n          if (text.includes('Date limite de candidature')) {\n            // Extract just the date portion\n            const dateMatch = text.match(/\\d{2}\\/\\d{2}\\/\\d{4}\\s+\\d{2}:\\d{2}/);\n            if (dateMatch) {\n              console.log('Found \"Date limite de candidature\" with date:', dateMatch[0]);\n              deadline = `Date limite de candidature : ${dateMatch[0]}`;\n            }\n          }\n        }\n      }\n      \n      // Strategy 4: Look for specific FieldName/FieldValue pairs\n      if (!deadline) {\n        const fieldNames = Array.from(document.querySelectorAll('.FieldName, [class*=\"field-name\"]'));\n        \n        for (const fieldName of fieldNames) {\n          const fieldText = fieldName.textContent?.trim().toLowerCase() || '';\n          \n          if (fieldText.includes('closing date') || fieldText.includes('deadline')) {\n            // Look for the corresponding value\n            const fieldValue = fieldName.nextElementSibling;\n            if (fieldValue) {\n              const valueText = fieldValue.textContent?.trim() || '';\n              const dateMatch = valueText.match(/\\d{2}\\/\\d{2}\\/\\d{4}/);\n              \n              if (dateMatch) {\n                console.log('Found deadline in field value:', dateMatch[0]);\n                deadline = dateMatch[0];\n              }\n            }\n          }\n        }\n      }\n      \n      console.log('Extraction complete - Deadline:', deadline, 'Location:', location);\n      return { deadline: deadline, location: location };\n    });\n    \n    if (details.deadline) {\n      console.log(`âœ“ Deadline found: ${details.deadline}`);\n    } else {\n      console.log('âœ— No deadline found');\n    }\n    \n    if (details.location) {\n      console.log(`âœ“ Location found: ${details.location}`);\n    } else {\n      console.log('âœ— No location found');\n    }\n    \n    return details;\n    \n  } catch (error) {\n    console.error(`Error fetching details for ${job.title}:`, error.message);\n    return { deadline: '', location: '' };\n  }\n}\n\n// Extract jobs from the current page\nasync function extractJobsFromCurrentPage(page, pageNumber) {\n  return await page.evaluate((pageNumber) => {\n    const extractedJobs = [];\n    \n    console.log('=== Starting job extraction for page', pageNumber, '===');\n    \n    // Strategy 1: Look for job cards/tiles\n    const jobCards = document.querySelectorAll('[class*=\"job-card\"], [class*=\"jobcard\"], [class*=\"job-tile\"], [class*=\"posting\"], [class*=\"position-card\"], [class*=\"requisition\"]');\n    console.log(`Found ${jobCards.length} job cards`);\n    \n    jobCards.forEach((card, index) => {\n      try {\n        const link = card.querySelector('a[href*=\"job\"], a[href*=\"requisition\"], a[href*=\"posting\"], a[href*=\"detail\"]');\n        const titleElement = card.querySelector('[class*=\"title\"], h2, h3, h4, .job-title, .position-title, a[href*=\"job\"]');\n        const locationElement = card.querySelector('[class*=\"location\"], .location, [class*=\"geo\"]');\n        const departmentElement = card.querySelector('[class*=\"department\"], [class*=\"division\"], [class*=\"unit\"]');\n        const dateElement = card.querySelector('[class*=\"date\"], [class*=\"posted\"], time');\n        \n        if (link && titleElement) {\n          const href = link.getAttribute('href');\n          let fullUrl = href;\n          \n          if (href && !href.startsWith('http')) {\n            if (href.startsWith('/')) {\n              fullUrl = `https://worldbankgroup.csod.com${href}`;\n            } else if (href.startsWith('?') || href.startsWith('#')) {\n              fullUrl = `https://worldbankgroup.csod.com/ux/ats/careersite/1/home${href}`;\n            } else {\n              fullUrl = `https://worldbankgroup.csod.com/ux/ats/careersite/1/${href}`;\n            }\n          }\n          \n          extractedJobs.push({\n            title: titleElement.textContent?.trim() || '',\n            link: fullUrl,\n            location: locationElement?.textContent?.trim() || '',\n            department: departmentElement?.textContent?.trim() || '',\n            postedDate: dateElement?.textContent?.trim() || dateElement?.getAttribute('datetime') || '',\n            deadline: '',\n            pageNumber: pageNumber,\n            scrapedAt: new Date().toISOString()\n          });\n        }\n      } catch (error) {\n        console.log(`Error processing job card ${index}:`, error.message);\n      }\n    });\n    \n    // Strategy 2: Look for table/list-based job listings\n    if (extractedJobs.length === 0) {\n      console.log('No job cards found, trying table/list approach');\n      \n      const jobRows = document.querySelectorAll('tr[class*=\"job\"], tr[class*=\"position\"], li[class*=\"job\"], li[class*=\"position\"], [role=\"row\"]');\n      console.log(`Found ${jobRows.length} job rows/items`);\n      \n      jobRows.forEach((row, index) => {\n        try {\n          const link = row.querySelector('a[href*=\"job\"], a[href*=\"requisition\"], a[href*=\"detail\"]');\n          \n          if (link) {\n            const href = link.getAttribute('href');\n            let fullUrl = href;\n            \n            if (href && !href.startsWith('http')) {\n              if (href.startsWith('/')) {\n                fullUrl = `https://worldbankgroup.csod.com${href}`;\n              } else {\n                fullUrl = `https://worldbankgroup.csod.com/ux/ats/careersite/1/${href}`;\n              }\n            }\n            \n            const cells = row.querySelectorAll('td, [class*=\"cell\"], [class*=\"column\"], [role=\"cell\"]');\n            const title = link.textContent?.trim() || row.querySelector('[class*=\"title\"]')?.textContent?.trim() || '';\n            \n            let location = '';\n            let department = '';\n            let postedDate = '';\n            \n            cells.forEach(cell => {\n              const cellText = cell.textContent?.trim() || '';\n              const cellClass = cell.className?.toLowerCase() || '';\n              \n              if (cellClass.includes('location') || cellClass.includes('geo')) {\n                location = cellText;\n              } else if (cellClass.includes('department') || cellClass.includes('unit')) {\n                department = cellText;\n              } else if (cellClass.includes('date') || cellClass.includes('posted')) {\n                postedDate = cellText;\n              }\n            });\n            \n            if (title && title.length > 3) {\n              extractedJobs.push({\n                title: title,\n                link: fullUrl,\n                location: location || '',\n                department: department || '',\n                postedDate: postedDate || '',\n                deadline: '',\n                pageNumber: pageNumber,\n                scrapedAt: new Date().toISOString()\n              });\n            }\n          }\n        } catch (error) {\n          console.log(`Error processing job row ${index}:`, error.message);\n        }\n      });\n    }\n    \n    // Strategy 3: Generic link-based extraction (fallback)\n    if (extractedJobs.length === 0) {\n      console.log('No structured jobs found, trying generic link approach');\n      \n      const jobLinks = document.querySelectorAll('a[href*=\"jobdetail\"], a[href*=\"requisition\"], a[href*=\"/job/\"], a[href*=\"posting\"]');\n      console.log(`Found ${jobLinks.length} potential job links`);\n      \n      jobLinks.forEach((link, index) => {\n        try {\n          const href = link.getAttribute('href');\n          if (!href || href === '#' || href === 'javascript:void(0)') return;\n          \n          let fullUrl = href;\n          if (!href.startsWith('http')) {\n            if (href.startsWith('/')) {\n              fullUrl = `https://worldbankgroup.csod.com${href}`;\n            } else {\n              fullUrl = `https://worldbankgroup.csod.com/ux/ats/careersite/1/${href}`;\n            }\n          }\n          \n          const title = link.textContent?.trim() || link.getAttribute('title') || '';\n          \n          if (title && title.length > 5 && !title.match(/^(view|apply|details|more|next|previous|page)$/i)) {\n            const container = link.closest('[class*=\"job\"], [class*=\"position\"], tr, li, article, .card');\n            \n            extractedJobs.push({\n              title: title,\n              link: fullUrl,\n              location: container?.querySelector('[class*=\"location\"]')?.textContent?.trim() || '',\n              department: container?.querySelector('[class*=\"department\"]')?.textContent?.trim() || '',\n              postedDate: container?.querySelector('[class*=\"date\"], time')?.textContent?.trim() || '',\n              deadline: '',\n              pageNumber: pageNumber,\n              scrapedAt: new Date().toISOString()\n            });\n          }\n        } catch (error) {\n          console.log(`Error processing job link ${index}:`, error.message);\n        }\n      });\n    }\n    \n    console.log(`Total jobs extracted from page ${pageNumber}: ${extractedJobs.length}`);\n    \n    // Deduplicate based on link\n    const uniqueJobs = [];\n    const seenLinks = new Set();\n    \n    extractedJobs.forEach(job => {\n      if (!seenLinks.has(job.link)) {\n        seenLinks.add(job.link);\n        uniqueJobs.push(job);\n      }\n    });\n    \n    console.log(`Unique jobs after deduplication: ${uniqueJobs.length}`);\n    return uniqueJobs;\n  }, pageNumber);\n}\n\n// Check if pagination exists and get next page info\nasync function checkForNextPage(page, currentPage) {\n  return await page.evaluate((currentPage) => {\n    const paginationInfo = {\n      hasNextPage: false,\n      nextPageElement: null,\n      method: null,\n      debugInfo: []\n    };\n    \n    // Strategy 1: Look for \"Next\" button\n    const nextButtons = Array.from(document.querySelectorAll('a, button')).filter(el => {\n      const text = el.textContent?.trim().toLowerCase() || '';\n      const ariaLabel = el.getAttribute('aria-label')?.toLowerCase() || '';\n      const title = el.getAttribute('title')?.toLowerCase() || '';\n      \n      return (text.includes('next') || \n              text === '>' || \n              text === '>>' || \n              text === 'â€º' ||\n              text === 'Â»' ||\n              ariaLabel.includes('next') || \n              title.includes('next')) &&\n             !el.classList.contains('disabled') &&\n             !el.hasAttribute('disabled');\n    });\n    \n    if (nextButtons.length > 0) {\n      const nextBtn = nextButtons[0];\n      const href = nextBtn.getAttribute('href');\n      const onclick = nextBtn.getAttribute('onclick');\n      \n      paginationInfo.hasNextPage = true;\n      paginationInfo.nextPageElement = {\n        tag: nextBtn.tagName,\n        text: nextBtn.textContent?.trim() || 'Next',\n        href: href,\n        onclick: onclick,\n        className: nextBtn.className\n      };\n      paginationInfo.method = 'next-button';\n      paginationInfo.debugInfo.push('Found \"Next\" button');\n      return paginationInfo;\n    }\n    \n    // Strategy 2: Look for numbered pagination\n    const pageNumbers = Array.from(document.querySelectorAll('a[href*=\"page\"], button[class*=\"page\"]')).filter(el => {\n      const text = el.textContent?.trim() || '';\n      const pageNum = parseInt(text);\n      return !isNaN(pageNum) && pageNum === currentPage + 1;\n    });\n    \n    if (pageNumbers.length > 0) {\n      const nextPageBtn = pageNumbers[0];\n      const href = nextPageBtn.getAttribute('href');\n      \n      paginationInfo.hasNextPage = true;\n      paginationInfo.nextPageElement = {\n        tag: nextPageBtn.tagName,\n        text: nextPageBtn.textContent?.trim(),\n        href: href,\n        className: nextPageBtn.className\n      };\n      paginationInfo.method = 'page-number';\n      paginationInfo.debugInfo.push(`Found page number ${currentPage + 1}`);\n      return paginationInfo;\n    }\n    \n    paginationInfo.debugInfo.push('No pagination found');\n    return paginationInfo;\n  }, currentPage);\n}\n\n// Navigate to the next page\nasync function navigateToNextPage(page, paginationInfo) {\n  try {\n    const nextElement = paginationInfo.nextPageElement;\n    console.log(`Navigating using method: ${paginationInfo.method}`);\n    \n    // Method 1: Direct URL navigation\n    if (nextElement.href && !nextElement.href.includes('javascript:')) {\n      let nextUrl = nextElement.href;\n      \n      if (!nextUrl.startsWith('http')) {\n        if (nextUrl.startsWith('/')) {\n          nextUrl = `https://worldbankgroup.csod.com${nextUrl}`;\n        } else if (nextUrl.startsWith('?')) {\n          const currentUrl = page.url();\n          const baseUrl = currentUrl.split('?')[0];\n          nextUrl = `${baseUrl}${nextUrl}`;\n        }\n      }\n      \n      console.log(`Navigating to URL: ${nextUrl}`);\n      await page.goto(nextUrl, { \n        waitUntil: 'networkidle2', \n        timeout: 30000 \n      });\n      \n      await waitForJobListings(page);\n      return true;\n    }\n    \n    // Method 2: Click the element\n    const clicked = await page.evaluate((elementInfo) => {\n      const elements = Array.from(document.querySelectorAll('a, button')).filter(el => {\n        const text = el.textContent?.trim() || '';\n        const className = el.className || '';\n        return (text === elementInfo.text || className === elementInfo.className) &&\n               !el.classList.contains('disabled') &&\n               !el.hasAttribute('disabled');\n      });\n      \n      if (elements.length > 0) {\n        console.log(`Clicking element: ${elementInfo.text}`);\n        elements[0].click();\n        return true;\n      }\n      return false;\n    }, nextElement);\n    \n    if (clicked) {\n      console.log('Clicked pagination element, waiting for navigation...');\n      \n      try {\n        await Promise.race([\n          page.waitForNavigation({ waitUntil: 'networkidle2', timeout: 15000 }),\n          new Promise(resolve => setTimeout(resolve, 5000))\n        ]);\n      } catch (navError) {\n        console.log('Navigation timeout, checking if content changed...');\n      }\n      \n      await waitForJobListings(page);\n      return true;\n    }\n    \n    console.log('All navigation methods failed');\n    return false;\n    \n  } catch (navigationError) {\n    console.error('Navigation error:', navigationError.message);\n    return false;\n  }\n}\n\n// Main scraping function\nasync function scrapeWorldBankJobs() {\n  const browser = await puppeteer.launch({\n    headless: true,\n    args: [\n      '--no-sandbox', \n      '--disable-setuid-sandbox',\n      '--disable-dev-shm-usage',\n      '--disable-gpu',\n      '--disable-web-security',\n      '--disable-features=IsolateOrigins,site-per-process'\n    ]\n  });\n  \n  const page = await browser.newPage();\n  let allJobs = [];\n  let currentPage = 1;\n  const maxPages = 100;\n  \n  try {\n    await page.setUserAgent('Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36');\n    await page.setViewport({ width: 1920, height: 1080 });\n    \n    console.log('Starting World Bank job scraping...');\n    console.log('Navigating to World Bank careers page...');\n    console.log(`URL: ${START_URL}`);\n    \n    await page.goto(START_URL, {\n      waitUntil: 'networkidle2',\n      timeout: 45000\n    });\n    \n    console.log('Page loaded, waiting for job listings...');\n    await waitForJobListings(page);\n    \n    // Phase 1: Collect all job listings with pagination\n    while (currentPage <= maxPages) {\n      console.log(`\\n=== Processing Page ${currentPage} ===`);\n      console.log(`Current URL: ${page.url()}`);\n      \n      const hasJobs = await page.evaluate(() => {\n        const bodyText = document.body.textContent || '';\n        return !bodyText.includes('No jobs found') && \n               !bodyText.includes('0 results') &&\n               !bodyText.includes('no positions available') &&\n               !bodyText.includes('Aucun poste');\n      });\n      \n      if (!hasJobs) {\n        console.log('No jobs found on this page. Stopping.');\n        break;\n      }\n      \n      const pageJobs = await extractJobsFromCurrentPage(page, currentPage);\n      console.log(`Page ${currentPage}: Extracted ${pageJobs.length} jobs`);\n      \n      if (pageJobs.length === 0) {\n        console.log('No jobs extracted from this page');\n        \n        if (currentPage === 1) {\n          console.log('ERROR: No jobs found on first page. The site structure may have changed.');\n          break;\n        }\n        break;\n      }\n      \n      allJobs = allJobs.concat(pageJobs);\n      console.log(`Total jobs collected so far: ${allJobs.length}`);\n      \n      const paginationInfo = await checkForNextPage(page, currentPage);\n      console.log('Pagination check:', paginationInfo);\n      \n      if (!paginationInfo.hasNextPage) {\n        console.log('No more pages available. Stopping pagination.');\n        break;\n      }\n      \n      console.log('Attempting to navigate to next page...');\n      const navigationSuccess = await navigateToNextPage(page, paginationInfo);\n      \n      if (!navigationSuccess) {\n        console.log('Failed to navigate to next page. Stopping pagination.');\n        break;\n      }\n      \n      currentPage++;\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      \n      if (currentPage > maxPages) {\n        console.log(`Reached maximum page limit (${maxPages}). Stopping.`);\n        break;\n      }\n    }\n    \n    // Final deduplication before deadline fetching\n    const uniqueJobs = [];\n    const seenLinks = new Set();\n    \n    allJobs.forEach(job => {\n      if (!seenLinks.has(job.link)) {\n        seenLinks.add(job.link);\n        uniqueJobs.push(job);\n      }\n    });\n    \n    console.log(`\\n=== Phase 1 Complete ===`);\n    console.log(`Total pages processed: ${currentPage}`);\n    console.log(`Total unique jobs found: ${uniqueJobs.length}`);\n    \n    // Phase 2: Fetch deadlines and locations for each job\n    console.log(`\\n=== Phase 2: Fetching Deadlines and Locations ===`);\n    \n    for (let i = 0; i < uniqueJobs.length; i++) {\n      const job = uniqueJobs[i];\n      console.log(`\\n[${i + 1}/${uniqueJobs.length}] Processing job...`);\n      \n      const details = await getJobDetailsFromPage(page, job);\n      job.deadline = details.deadline;\n      job.location = details.location || job.location; // Use scraped location or keep original if found\n      \n      // Respectful delay between requests\n      await new Promise(resolve => setTimeout(resolve, 2000));\n    }\n    \n    await browser.close();\n    \n    console.log(`\\n=== SCRAPING COMPLETE ===`);\n    console.log(`Total jobs with data: ${uniqueJobs.length}`);\n    console.log(`Jobs with deadlines found: ${uniqueJobs.filter(j => j.deadline).length}`);\n    console.log(`Jobs with locations found: ${uniqueJobs.filter(j => j.location).length}`);\n    \n    // Return in n8n format\n    return uniqueJobs.map(job => ({ json: job }));\n    \n  } catch (error) {\n    await browser.close();\n    console.error('Error during scraping:', error);\n    throw error;\n  }\n}\n\n// Execute the scraping function\nreturn await scrapeWorldBankJobs();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1080,
        1540
      ],
      "id": "2d8680d3-8f67-489e-8097-34938c3ed790",
      "name": "WorldBank"
    },
    {
      "parameters": {
        "jsCode": "// N8N Code Node for UNGM Job Scraping\n// Fixed version with timeout handling and resource optimization\n\n// Get input data (if any)\nconst inputItems = $input.all();\n\n// Import puppeteer (must be installed in N8N environment)\nconst puppeteer = require('puppeteer');\n\n// Helper function for delays\nfunction delay(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nasync function scrapeUNGMJobs() {\n    let browser;\n    \n    try {\n        console.log('ðŸš€ Starting UNGM Job Scraper...');\n        \n        // Launch browser with increased timeout and optimized settings\n        browser = await puppeteer.launch({\n            headless: true,\n            protocolTimeout: 120000, // Increased to 2 minutes\n            args: [\n                '--no-sandbox',\n                '--disable-setuid-sandbox',\n                '--disable-web-security',\n                '--disable-features=VizDisplayCompositor',\n                '--disable-blink-features=AutomationControlled',\n                '--disable-dev-shm-usage',\n                '--disable-accelerated-2d-canvas',\n                '--disable-gpu',\n                '--window-size=1920,1080',\n                '--disable-extensions',\n                '--disable-background-networking',\n                '--disable-background-timer-throttling',\n                '--disable-backgrounding-occluded-windows',\n                '--disable-breakpad',\n                '--disable-component-extensions-with-background-pages',\n                '--disable-features=TranslateUI',\n                '--disable-ipc-flooding-protection',\n                '--disable-renderer-backgrounding',\n                '--enable-features=NetworkService,NetworkServiceInProcess',\n                '--force-color-profile=srgb',\n                '--metrics-recording-only',\n                '--mute-audio',\n                '--no-first-run'\n            ]\n        });\n        \n        const page = await browser.newPage();\n        \n        // Set timeout for page operations\n        page.setDefaultTimeout(60000);\n        page.setDefaultNavigationTimeout(90000);\n        \n        await page.setViewport({ width: 1920, height: 1080 });\n        \n        // Set realistic user agent\n        await page.setUserAgent('Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36');\n        \n        // Disable unnecessary resources to speed up loading\n        await page.setRequestInterception(true);\n        page.on('request', (req) => {\n            const resourceType = req.resourceType();\n            if (['image', 'stylesheet', 'font', 'media'].includes(resourceType)) {\n                req.abort();\n            } else {\n                req.continue();\n            }\n        });\n        \n        console.log('ðŸ“± Browser launched successfully');\n        \n        // Navigate to UNGM Notice page\n        console.log('ðŸŒ Navigating to UNGM website...');\n        await page.goto('https://www.ungm.org/Public/Notice', { \n            waitUntil: 'domcontentloaded', // Changed from networkidle2 for faster loading\n            timeout: 90000 \n        });\n        \n        await delay(3000);\n        console.log('âœ… Page loaded successfully');\n        \n        // Updated selectors\n        const SELECTORS = {\n            activeOpportunitiesCheckbox: '#chkIsActive',\n            consultantCheckbox: '#IndividualConsultant',\n            deadlineFromField: '#txtNoticeDeadlineFrom',\n            deadlineToField: '#txtNoticeDeadlineTo',\n            publishedFromField: '#txtNoticePublishedFrom',\n            publishedToField: '#txtNoticePublishedTo',\n            searchButton: '#lnkSearch',\n            jobListingsContainer: '.notice-table',\n            jobRow: '.tableRow.dataRow.notice-table',\n            jobTitle: '.ungm-title.ungm-title--small',\n            jobDeadline: '.tableCell.resultInfo1.deadline span:first-child'\n        };\n        \n        console.log('ðŸ” Setting up filters...');\n        \n        // Apply filters with better error handling\n        try {\n            console.log('ðŸ“‹ Clicking Active opportunities checkbox...');\n            await page.waitForSelector(SELECTORS.activeOpportunitiesCheckbox, { timeout: 10000 });\n            const isChecked = await page.$eval(SELECTORS.activeOpportunitiesCheckbox, el => el.checked);\n            if (!isChecked) {\n                await page.click(SELECTORS.activeOpportunitiesCheckbox);\n                await delay(500);\n                console.log('âœ… Active opportunities checkbox clicked');\n            }\n        } catch (error) {\n            console.warn('âš ï¸ Active opportunities checkbox error:', error.message);\n        }\n        \n        try {\n            console.log('ðŸ‘¤ Clicking Individual consultants checkbox...');\n            await page.waitForSelector(SELECTORS.consultantCheckbox, { timeout: 10000 });\n            const isChecked = await page.$eval(SELECTORS.consultantCheckbox, el => el.checked);\n            if (!isChecked) {\n                await page.click(SELECTORS.consultantCheckbox);\n                await delay(500);\n                console.log('âœ… Individual consultants checkbox clicked');\n            }\n        } catch (error) {\n            console.warn('âš ï¸ Consultant checkbox error:', error.message);\n        }\n        \n        // Clear date fields\n        const dateFields = [\n            SELECTORS.deadlineFromField,\n            SELECTORS.deadlineToField,\n            SELECTORS.publishedFromField,\n            SELECTORS.publishedToField\n        ];\n        \n        console.log('ðŸ“… Clearing date fields...');\n        for (const fieldSelector of dateFields) {\n            try {\n                await page.waitForSelector(fieldSelector, { timeout: 5000 });\n                await page.$eval(fieldSelector, el => el.value = '');\n                console.log(`âœ… Cleared field: ${fieldSelector}`);\n            } catch (error) {\n                console.warn(`âš ï¸ Error clearing field ${fieldSelector}:`, error.message);\n            }\n        }\n        \n        // Click search button\n        try {\n            console.log('ðŸ” Clicking search button...');\n            await page.waitForSelector(SELECTORS.searchButton, { timeout: 10000 });\n            await page.click(SELECTORS.searchButton);\n            await delay(5000);\n            console.log('âœ… Search button clicked');\n        } catch (error) {\n            console.warn('âš ï¸ Search button error:', error.message);\n        }\n        \n        // Wait for results\n        try {\n            await page.waitForSelector(SELECTORS.jobRow, { timeout: 30000 });\n            console.log('âœ… Job results loaded');\n        } catch (error) {\n            console.warn('âš ï¸ Timeout waiting for job results');\n        }\n        \n        // Infinite scroll handling (reduced attempts for faster execution)\n        console.log('ðŸ“œ Loading jobs with scroll...');\n        \n        const getJobCount = async () => {\n            return await page.evaluate((selector) => {\n                return document.querySelectorAll(selector).length;\n            }, SELECTORS.jobRow);\n        };\n        \n        let previousJobCount = 0;\n        let currentJobCount = await getJobCount();\n        let scrollAttempts = 0;\n        const maxScrollAttempts = 30; // Reduced from 50\n        const scrollWaitTime = 2000; // Reduced from 3000\n        \n        console.log(`ðŸ“Š Initial job count: ${currentJobCount}`);\n        \n        do {\n            previousJobCount = currentJobCount;\n            scrollAttempts++;\n            \n            // Scroll to bottom\n            await page.evaluate(() => {\n                window.scrollTo(0, document.body.scrollHeight);\n            });\n            \n            await delay(scrollWaitTime);\n            \n            // Try to find and click load more/next buttons\n            try {\n                const buttonClicked = await page.evaluate(() => {\n                    // Look for load more buttons\n                    const loadMoreSelectors = [\n                        'button:contains(\"Load More\")',\n                        'button:contains(\"Show More\")',\n                        '.load-more',\n                        '#loadMore'\n                    ];\n                    \n                    for (const sel of loadMoreSelectors) {\n                        const button = document.querySelector(sel);\n                        if (button && !button.disabled) {\n                            button.click();\n                            return true;\n                        }\n                    }\n                    \n                    // Look for next page buttons\n                    const nextSelectors = [\n                        'button[aria-label*=\"Next\"]',\n                        '.pagination .next:not(.disabled)',\n                        'a[title*=\"Next\"]'\n                    ];\n                    \n                    for (const sel of nextSelectors) {\n                        const button = document.querySelector(sel);\n                        if (button && !button.disabled && !button.classList.contains('disabled')) {\n                            button.click();\n                            return true;\n                        }\n                    }\n                    \n                    return false;\n                });\n                \n                if (buttonClicked) {\n                    await delay(scrollWaitTime * 2);\n                    console.log('âž• Clicked pagination button');\n                }\n            } catch (error) {\n                // Continue if button not found\n            }\n            \n            currentJobCount = await getJobCount();\n            console.log(`ðŸ“ˆ Scroll ${scrollAttempts}: ${currentJobCount} jobs (was ${previousJobCount})`);\n            \n            if (scrollAttempts >= maxScrollAttempts) {\n                console.warn(`âš ï¸ Reached max scroll attempts (${maxScrollAttempts})`);\n                break;\n            }\n            \n        } while (currentJobCount > previousJobCount);\n        \n        console.log(`ðŸ Final job count: ${currentJobCount}`);\n        \n        // Extract job data\n        console.log('ðŸ”„ Extracting job data...');\n        const jobs = await page.evaluate((selectors) => {\n            const jobRows = document.querySelectorAll(selectors.jobRow);\n            const extractedJobs = [];\n            \n            jobRows.forEach((row, index) => {\n                try {\n                    const titleEl = row.querySelector(selectors.jobTitle);\n                    const title = titleEl?.textContent?.trim() || '';\n                    \n                    const deadlineEl = row.querySelector(selectors.jobDeadline);\n                    const deadline = deadlineEl?.textContent?.trim() || '';\n                    \n                    const orgEl = row.querySelector('.tableCell.resultAgency span');\n                    const organization = orgEl?.textContent?.trim() || '';\n                    \n                    const tableCells = row.querySelectorAll('.tableCell');\n                    let location = '';\n                    if (tableCells.length >= 8) {\n                        location = tableCells[7].querySelector('span')?.textContent?.trim() || '';\n                    }\n                    \n                    const refEl = row.querySelector('.tableCell.resultInfo1[data-description=\"Reference\"] span');\n                    const reference = refEl?.textContent?.trim() || '';\n                    \n                    let publishedDate = '';\n                    if (tableCells.length >= 4) {\n                        publishedDate = tableCells[3].querySelector('span')?.textContent?.trim() || '';\n                    }\n                    \n                    const noticeId = row.getAttribute('data-noticeid') || '';\n                    \n                    if (title && title.length > 2) {\n                        extractedJobs.push({\n                            title,\n                            deadline,\n                            organization,\n                            location,\n                            reference,\n                            publishedDate,\n                            noticeId,\n                            detailUrl: `https://www.ungm.org/Public/Notice/${noticeId}`,\n                            extractedAt: new Date().toISOString(),\n                            jobIndex: index + 1\n                        });\n                    }\n                } catch (error) {\n                    console.error(`Error processing job row ${index}:`, error);\n                }\n            });\n            \n            return extractedJobs;\n        }, SELECTORS);\n        \n        await browser.close();\n        \n        console.log(`âœ… Successfully extracted ${jobs.length} jobs`);\n        \n        return {\n            success: true,\n            totalJobs: jobs.length,\n            jobs: jobs,\n            scrapedAt: new Date().toISOString(),\n            filters: {\n                activeOpportunities: true,\n                individualConsultants: true,\n                clearedDateFields: true\n            }\n        };\n        \n    } catch (error) {\n        console.error('ðŸ’¥ Scraping failed:', error);\n        \n        if (browser) {\n            try {\n                await browser.close();\n            } catch (closeError) {\n                console.error('Error closing browser:', closeError);\n            }\n        }\n        \n        throw error;\n    }\n}\n\n// Main execution for N8N\ntry {\n    const result = await scrapeUNGMJobs();\n    \n    if (result.success && result.jobs.length > 0) {\n        console.log(`ðŸŽ‰ Returning ${result.jobs.length} jobs to N8N`);\n        \n        return result.jobs.map(job => ({\n            json: {\n                ...job,\n                scrapingMetadata: {\n                    totalJobsFound: result.totalJobs,\n                    scrapedAt: result.scrapedAt,\n                    filtersApplied: result.filters\n                }\n            }\n        }));\n    } else {\n        return [{\n            json: {\n                error: 'No jobs found or scraping failed',\n                success: false,\n                totalJobs: 0,\n                scrapedAt: new Date().toISOString(),\n                message: 'Check if website structure has changed or if filters are working correctly'\n            }\n        }];\n    }\n    \n} catch (error) {\n    console.error('ðŸš¨ Final error:', error);\n    \n    return [{\n        json: {\n            error: error.message,\n            success: false,\n            scrapedAt: new Date().toISOString(),\n            stack: error.stack\n        }\n    }];\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1080,
        1860
      ],
      "id": "8f4d369c-39aa-4487-8c6b-09973400e613",
      "name": "UNGM"
    },
    {
      "parameters": {
        "jsCode": "// n8n Code Node - EU Careers Job Scraper (Updated CSS Selectors)\n\nconst puppeteer = require('puppeteer');\n\nconst targetUrl = 'https://eu-careers.europa.eu/en/job-opportunities/open-vacancies/ec_vacancies?field_epso_domain_target_id=&field_epso_type_of_contract_target_id=770&field_epso_location_target_id=All';\nlet browser;\nconst allJobs = [];\nconst delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));\n\n\n\ntry {\n  browser = await puppeteer.launch({\n    headless: true,\n    args: [\n      '--no-sandbox',\n      '--disable-setuid-sandbox',\n      '--disable-dev-shm-usage',\n      '--disable-gpu',\n      '--window-size=1920,1080'\n    ],\n    protocolTimeout: 180000,\n    timeout: 60000\n  });\n  \n  const page = await browser.newPage();\n  await page.setViewport({ width: 1920, height: 1080 });\n  await page.setUserAgent('Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36');\n  \n  console.log('Navigating to EU Careers website...');\n  await page.goto(targetUrl, { waitUntil: 'networkidle0', timeout: 60000 });\n  await delay(5000);\n  \n  // Debug: Analyze page structure\n  const pageStructure = await page.evaluate(() => {\n    return {\n      title: document.title,\n      h1Count: document.querySelectorAll('h1').length,\n      articleCount: document.querySelectorAll('article').length,\n      listItems: document.querySelectorAll('li').length,\n      divContainers: document.querySelectorAll('[class*=\"job\"], [class*=\"vacancy\"], [class*=\"listing\"]').length,\n      sampleLinks: Array.from(document.querySelectorAll('a[href*=\"job\"], a[href*=\"vacancy\"]')).slice(0, 3).map(a => ({\n        text: a.innerText.substring(0, 50),\n        href: a.href\n      }))\n    };\n  });\n  \n  console.log('Page structure:', JSON.stringify(pageStructure, null, 2));\n  \n  let pageNumber = 1;\n  let hasNextPage = true;\n  const maxPages = 10;\n  \n  while (hasNextPage && pageNumber <= maxPages) {\n    console.log(`\\nProcessing page ${pageNumber}...`);\n    await delay(2000);\n    \n    const jobsOnPage = await page.evaluate(() => {\n      const jobs = [];\n      \n      // Extract from table rows using the provided CSS selectors\n      const tableRows = document.querySelectorAll('#block-mainpagecontent > div > div > table > tbody > tr');\n      \n      if (tableRows.length > 0) {\n        console.log(`Found ${tableRows.length} job rows in table`);\n        \n        tableRows.forEach((row, index) => {\n          try {\n            // Get job title and link\n            const titleLink = row.querySelector('a[href]');\n            if (!titleLink) return;\n            \n            const href = titleLink.getAttribute('href');\n            if (!href || href === '#' || href.startsWith('javascript:')) return;\n            \n            const title = titleLink.innerText?.trim() || '';\n            if (!title || title.length < 5) return;\n            \n            let fullUrl = href.startsWith('http') ? href : new URL(href, window.location.origin).href;\n            \n            // Extract Location using provided selector\n            const locationElement = row.querySelector('td.priority-low.views-field.views-field-field-epso-location');\n            const location = locationElement?.innerText?.trim() || 'Not specified';\n            \n            // Extract Deadline using provided selector\n            const deadlineElement = row.querySelector('td.views-field.views-field-field-epso-deadline > time');\n            const deadline = deadlineElement?.getAttribute('datetime') || deadlineElement?.innerText?.trim() || 'Not specified';\n            \n            // Extract DG using provided selector\n            const dgElement = row.querySelector('td.priority-low.views-field.views-field-field-dgnew');\n            const dg = dgElement?.innerText?.trim() || 'Not specified';\n            \n            // Extract Domain using provided selector\n            const domainLink = row.querySelector('td.views-field.views-field-field-epso-domain > a');\n            const domain = domainLink?.innerText?.trim() || 'Not specified';\n            \n            jobs.push({\n              Title: title,\n              Link: fullUrl,\n              Location: location,\n              Deadline: deadline,\n              DG: dg,\n              Domain: domain,\n              extractionMethod: 'table'\n            });\n          } catch (e) {\n            console.error(`Error extracting row ${index}:`, e.message);\n          }\n        });\n      }\n      \n      return jobs;\n    });\n    \n    console.log(`Found ${jobsOnPage.length} jobs on page ${pageNumber}`);\n    \n    if (jobsOnPage.length === 0) {\n      console.log('No jobs found on this page');\n      break;\n    }\n    \n    // Add jobs to collection\n    jobsOnPage.forEach(job => {\n      allJobs.push(job);\n    });\n    \n    console.log(`Page ${pageNumber} complete. Total jobs: ${allJobs.length}`);\n    \n    // Check for next page\n    const nextPageInfo = await page.evaluate(() => {\n      const nextSelectors = [\n        'a.next',\n        '.pager-next a',\n        '.pager__item--next a',\n        'li.next a',\n        '[rel=\"next\"]',\n        'a[aria-label*=\"next\" i]',\n        '.pagination a.next',\n        '.pagination li:not(.disabled) a[aria-label*=\"next\"]'\n      ];\n      \n      for (const selector of nextSelectors) {\n        const btn = document.querySelector(selector);\n        if (btn) {\n          const isDisabled = btn.classList.contains('disabled') || \n                           btn.closest('li')?.classList.contains('disabled') ||\n                           btn.hasAttribute('disabled');\n          \n          if (!isDisabled) {\n            return {\n              found: true,\n              selector: selector,\n              disabled: false,\n              text: btn.innerText,\n              href: btn.href\n            };\n          }\n        }\n      }\n      \n      return { found: false };\n    });\n    \n    if (nextPageInfo.found && !nextPageInfo.disabled) {\n      console.log('Navigating to next page...');\n      await page.click(nextPageInfo.selector);\n      await delay(2000);\n      await page.waitForNavigation({ waitUntil: 'domcontentloaded', timeout: 30000 }).catch(() => {});\n      await delay(3000);\n      pageNumber++;\n    } else {\n      hasNextPage = false;\n    }\n  }\n  \n  console.log(`\\nScraping complete. Total jobs: ${allJobs.length}`);\n  \n} catch (error) {\n  console.error('Error:', error.message);\n  \n  if (browser) {\n    await browser.close();\n  }\n  \n  return [{\n    json: {\n      error: true,\n      message: error.message,\n      totalJobsBeforeError: allJobs.length\n    }\n  }];\n  \n} finally {\n  if (browser) {\n    await browser.close();\n  }\n}\n\n// Remove duplicates\nconst uniqueJobs = [];\nconst seenLinks = new Set();\n\nallJobs.forEach(job => {\n  if (!seenLinks.has(job.Link)) {\n    seenLinks.add(job.Link);\n    uniqueJobs.push(job);\n  }\n});\n\nconsole.log(`Unique jobs: ${uniqueJobs.length}`);\n\nif (uniqueJobs.length === 0) {\n  return [{ \n    json: { \n      message: 'No jobs found', \n      error: 'No job listings could be extracted from the page',\n      debugInfo: 'Check console logs for page analysis and extraction methods'\n    } \n  }];\n}\n\nreturn uniqueJobs.map(job => ({ json: job }));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1080,
        380
      ],
      "id": "7648d400-c747-4477-908e-6ce581566f91",
      "name": "EU-europa(Also use the information extractor to filter it jobs from non it jobs)"
    },
    {
      "parameters": {
        "jsCode": "// n8n Code Node - UNDP Careers Job Scraper\n// This script scrapes job listings from UNDP careers website using Puppeteer\n\nconst puppeteer = require('puppeteer');\n\n// Helper function to wait/sleep\nconst sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));\n\n// Main scraping function\nasync function scrapeUNDPJobs() {\n  let browser;\n  const allJobs = [];\n  \n  try {\n    // Launch browser in headless mode\n    browser = await puppeteer.launch({\n      headless: true,\n      args: [\n        '--no-sandbox',\n        '--disable-setuid-sandbox',\n        '--disable-dev-shm-usage',\n        '--disable-accelerated-2d-canvas',\n        '--disable-gpu'\n      ]\n    });\n    \n    const page = await browser.newPage();\n    \n    // Set viewport and user agent\n    await page.setViewport({ width: 1920, height: 1080 });\n    await page.setUserAgent('Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36');\n    \n    // Navigate to the target URL\n    console.log('Navigating to UNDP careers page...');\n    await page.goto('https://jobs.undp.org/cj_view_consultancies.cfm', {\n      waitUntil: 'domcontentloaded',\n      timeout: 60000\n    });\n    \n    // Wait for page to settle and render content\n    await sleep(5000);\n    \n    // Debug: Log page info\n    console.log('Page loaded, checking for job links...');\n    console.log('Page title:', await page.title());\n    \n    let currentPage = 1;\n    let hasNextPage = true;\n    \n    // PAGINATION LOOP: Continue scraping until no more pages are available\n    while (hasNextPage) {\n      console.log(`Scraping page ${currentPage}...`);\n      \n      // Wait for any links to appear (more flexible approach)\n      try {\n        await page.waitForSelector('a', { timeout: 10000 });\n      } catch (e) {\n        console.log('No links found, trying to scrape anyway...');\n      }\n      \n      // Give the page a moment to fully render\n      await sleep(2000);\n      \n      // DATA EXTRACTION: Extract job information from the current page\n      const jobsOnPage = await page.evaluate(() => {\n        const jobs = [];\n        \n        // Look for job links containing specific patterns\n        let jobLinks = Array.from(document.querySelectorAll('a')).filter(a => \n          a.href.includes('procurement-notices.undp.org') && \n          a.href.includes('view_negotiation')\n        );\n        \n        console.log(`Found ${jobLinks.length} job links`);\n        \n        jobLinks.forEach((linkElement, index) => {\n          try {\n            // Get the job URL\n            const link = linkElement.href;\n            \n            // Skip if not a valid job link\n            if (!link || link.startsWith('javascript:') || link.startsWith('#')) return;\n            \n            // Extract Job Title - text content of the link itself\n            const title = linkElement.textContent.trim().replace(/\\s+/g, ' ');\n            \n            // Extract Job URL - the href attribute of the link element\n            const jobUrl = linkElement.href;\n            \n            // Only add job if we have a title and URL\n            if (title && jobUrl) {\n              jobs.push({\n                JobTitle: title,\n                JobURL: jobUrl\n              });\n            }\n            \n          } catch (error) {\n            console.log('Error parsing job:', error.message);\n          }\n        });\n        \n        return jobs;\n      });\n      \n      console.log(`Found ${jobsOnPage.length} jobs on page ${currentPage}`);\n      allJobs.push(...jobsOnPage);\n      \n      // CHECK FOR NEXT PAGE: Look for pagination controls\n      try {\n        // Wait a bit before checking for next button\n        await sleep(1000);\n        \n        // Look for \"Next\" button or similar pagination element\n        const hasNext = await page.evaluate(() => {\n          // Look for various \"next\" patterns in links or buttons\n          const allLinks = Array.from(document.querySelectorAll('a, button'));\n          \n          const nextElement = allLinks.find(el => {\n            const text = el.textContent.trim().toLowerCase();\n            return text.includes('next') || \n                   text === '>' || \n                   text === 'Â»' ||\n                   text.includes('â†’') ||\n                   el.innerHTML.includes('&gt;') ||\n                   el.innerHTML.includes('next');\n          });\n          \n          return nextElement !== undefined;\n        });\n        \n        if (hasNext) {\n          // Click the next button and wait for navigation\n          await Promise.all([\n            page.evaluate(() => {\n              const allLinks = Array.from(document.querySelectorAll('a, button'));\n              const nextElement = allLinks.find(el => {\n                const text = el.textContent.trim().toLowerCase();\n                return text.includes('next') || \n                       text === '>' || \n                       text === 'Â»' ||\n                       text.includes('â†’') ||\n                       el.innerHTML.includes('&gt;') ||\n                       el.innerHTML.includes('next');\n              });\n              if (nextElement) nextElement.click();\n            }),\n            page.waitForNavigation({ waitUntil: 'networkidle2', timeout: 30000 }).catch(() => {\n              // Sometimes navigation doesn't trigger, that's ok\n            })\n          ]);\n          \n          currentPage++;\n          \n          // Wait for new content to load\n          await sleep(3000);\n        } else {\n          console.log('No more pages found. Scraping complete.');\n          hasNextPage = false;\n        }\n      } catch (error) {\n        console.log('Pagination ended or error occurred:', error.message);\n        hasNextPage = false;\n      }\n    }\n    \n    console.log(`Total jobs scraped: ${allJobs.length}`);\n    \n  } catch (error) {\n    console.error('Error during scraping:', error);\n    throw error;\n  } finally {\n    // Clean up: Close browser\n    if (browser) {\n      await browser.close();\n    }\n  }\n  \n  return allJobs;\n}\n\n// Execute the scraper and format output for n8n\nconst jobs = await scrapeUNDPJobs();\n\n// FORMAT OUTPUT FOR N8N: Convert to n8n-compatible format\n// Each item must be an object with a 'json' property\nreturn jobs.map(job => ({\n  json: job\n}));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1100,
        2140
      ],
      "id": "f3ebd022-792e-4e1e-99df-97df212c7ee7",
      "name": "UNDP"
    },
    {
      "parameters": {
        "jsCode": "// n8n Code Node - EU Careers Job Scraper (Full Page Text Extraction)\n\nconst puppeteer = require('puppeteer');\n\nconst targetUrl = 'https://adb.taleo.net/careersection/2/jobsearch.ftl#';\nlet browser;\nconst allJobs = [];\nconst delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));\n\n\n\ntry {\n  browser = await puppeteer.launch({\n    headless: true,\n    args: [\n      '--no-sandbox',\n      '--disable-setuid-sandbox',\n      '--disable-dev-shm-usage',\n      '--disable-gpu',\n      '--window-size=1920,1080'\n    ],\n    protocolTimeout: 180000,\n    timeout: 60000\n  });\n  \n  const page = await browser.newPage();\n  await page.setViewport({ width: 1920, height: 1080 });\n  await page.setUserAgent('Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36');\n  \n  console.log('Navigating to EU Careers website...');\n  await page.goto(targetUrl, { waitUntil: 'networkidle0', timeout: 60000 });\n  await delay(5000);\n  \n  let pageNumber = 1;\n  let hasNextPage = true;\n  const maxPages = 10;\n  \n  while (hasNextPage && pageNumber <= maxPages) {\n    console.log(`\\nProcessing page ${pageNumber}...`);\n    await delay(2000);\n    \n    const jobsOnPage = await page.evaluate(() => {\n      const jobs = [];\n      \n      // Extract jobs from table rows\n      const tableRows = document.querySelectorAll('table tr, tbody tr');\n      \n      tableRows.forEach((row) => {\n        const link = row.querySelector('a[href]');\n        if (!link) return;\n        \n        const href = link.getAttribute('href');\n        if (!href || href === '#' || href.startsWith('javascript:')) return;\n        \n        const title = link.innerText?.trim() || '';\n        if (!title || title.length < 5) return;\n        if (title.match(/^(Title|Domain|Grade|Location|Deadline|Sort|Filter)$/i)) return;\n        \n        let fullUrl = href.startsWith('http') ? href : new URL(href, window.location.origin).href;\n        \n        let location = 'Not specified';\n        let deadline = 'Not specified';\n        \n        // Extract location from cells\n        const cells = row.querySelectorAll('td');\n        if (cells.length >= 2) {\n          const locationText = cells[1]?.innerText?.trim() || '';\n          if (locationText) {\n            location = locationText;\n          }\n        }\n        \n        // Extract deadline using the specific CSS selector: td:nth-child(4) > div > div > span\n        const deadlineElement = row.querySelector('td:nth-child(4) > div > div > span');\n        if (deadlineElement) {\n          const deadlineText = deadlineElement.innerText?.trim() || deadlineElement.textContent?.trim();\n          if (deadlineText && deadlineText.length > 0) {\n            deadline = deadlineText;\n          }\n        }\n        \n        // Fallback: try alternate deadline selectors if primary fails\n        if (deadline === 'Not specified') {\n          const altSelectors = [\n            'td:nth-child(4) span',\n            'td:nth-child(4)',\n            'td.deadline',\n            'td[data-deadline]'\n          ];\n          \n          for (const selector of altSelectors) {\n            const elem = row.querySelector(selector);\n            if (elem) {\n              const text = elem.innerText?.trim() || elem.textContent?.trim();\n              if (text && text.length > 0 && !text.match(/^(Title|Domain|Grade|Location|Deadline)$/i)) {\n                deadline = text;\n                break;\n              }\n            }\n          }\n        }\n        \n        jobs.push({\n          Title: title,\n          Link: fullUrl,\n          Location: location,\n          Deadline: deadline,\n          extractionMethod: 'table'\n        });\n      });\n      \n      // Fallback: Articles if no tables found\n      if (jobs.length === 0) {\n        const articles = document.querySelectorAll('article, .views-row');\n        articles.forEach((article) => {\n          const link = article.querySelector('a[href]');\n          if (!link) return;\n          \n          const href = link.getAttribute('href');\n          if (!href || href === '#' || href.startsWith('javascript:')) return;\n          \n          const title = link.innerText?.trim() || '';\n          if (title.length < 5) return;\n          \n          let fullUrl = href.startsWith('http') ? href : new URL(href, window.location.origin).href;\n          \n          jobs.push({\n            Title: title,\n            Link: fullUrl,\n            Location: 'Not specified',\n            Deadline: 'Not specified',\n            extractionMethod: 'article'\n          });\n        });\n      }\n      \n      return jobs;\n    });\n    \n    console.log(`Found ${jobsOnPage.length} jobs on page ${pageNumber}`);\n    \n    if (jobsOnPage.length === 0) break;\n    \n    // Extract details for each job\n    for (let i = 0; i < jobsOnPage.length; i++) {\n      const job = jobsOnPage[i];\n      console.log(`[${i + 1}/${jobsOnPage.length}] Processing: ${job.Title.substring(0, 60)} | Deadline: ${job.Deadline}`);\n      \n      allJobs.push(job);\n    }\n    \n    console.log(`Page ${pageNumber} complete. Total jobs: ${allJobs.length}`);\n    \n    // Check for next page\n    const nextPageInfo = await page.evaluate(() => {\n      const nextSelectors = [\n        'a.next',\n        '.pager-next a',\n        '.pager__item--next a',\n        'li.next a',\n        '[rel=\"next\"]',\n        'a[title*=\"next\" i]',\n        '.pager a[aria-label*=\"next\" i]'\n      ];\n      \n      for (const selector of nextSelectors) {\n        const btn = document.querySelector(selector);\n        if (btn) {\n          const isDisabled = btn.classList.contains('disabled') || \n                           btn.closest('li')?.classList.contains('disabled') ||\n                           btn.hasAttribute('disabled');\n          \n          return {\n            found: true,\n            selector: selector,\n            disabled: isDisabled,\n            text: btn.innerText,\n            href: btn.href\n          };\n        }\n      }\n      \n      return { found: false };\n    });\n    \n    if (nextPageInfo.found && !nextPageInfo.disabled) {\n      console.log('Navigating to next page...');\n      await page.click(nextPageInfo.selector);\n      await delay(2000);\n      await page.waitForNavigation({ waitUntil: 'domcontentloaded', timeout: 30000 }).catch(() => {});\n      await delay(3000);\n      pageNumber++;\n    } else {\n      hasNextPage = false;\n    }\n  }\n  \n  console.log(`\\nScraping complete. Total jobs: ${allJobs.length}`);\n  \n} catch (error) {\n  console.error('Error:', error.message);\n  \n  if (browser) {\n    await browser.close();\n  }\n  \n  return [{\n    json: {\n      error: true,\n      message: error.message,\n      totalJobsBeforeError: allJobs.length,\n      jobs: allJobs\n    }\n  }];\n  \n} finally {\n  if (browser) {\n    await browser.close();\n  }\n}\n\n// Remove duplicates\nconst uniqueJobs = [];\nconst seenLinks = new Set();\n\nallJobs.forEach(job => {\n  if (!seenLinks.has(job.Link)) {\n    seenLinks.add(job.Link);\n    uniqueJobs.push(job);\n  }\n});\n\nconsole.log(`Unique jobs: ${uniqueJobs.length}`);\n\nif (uniqueJobs.length === 0) {\n  return [{ \n    json: { \n      message: 'No jobs found', \n      error: 'No job listings could be extracted from the page'\n    } \n  }];\n}\n\nreturn uniqueJobs.map(job => ({ json: job }));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1100,
        100
      ],
      "id": "ae13d159-fd1f-4f2a-bc7b-1a64ad35a70b",
      "name": "ADB (Description you need to an information extraction node or filter because the job url does not modify with the filtered job fields"
    },
    {
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -940,
        3460
      ],
      "id": "cf4d8928-799c-4841-9b05-05cbf4aec5ac",
      "name": "Loop Over Items3"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a8f5fcb9-78e1-46a6-9a5a-1d5ba80360f9",
              "leftValue": "={{ $('Loop Over Items3').item.json.Deadline }}",
              "rightValue": "={{ $json.convertedTime }}",
              "operator": {
                "type": "dateTime",
                "operation": "afterOrEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -500,
        3380
      ],
      "id": "31649cda-584b-4921-9032-08c1985dbecf",
      "name": "If"
    },
    {
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -920,
        2540
      ],
      "id": "46ef3b91-6f47-4029-a100-c207284cbe2d",
      "name": "Loop Over Items4"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a8f5fcb9-78e1-46a6-9a5a-1d5ba80360f9",
              "leftValue": "={{ $('Loop Over Items4').item.json.Deadline }}",
              "rightValue": "={{ $json.convertedTime }}",
              "operator": {
                "type": "dateTime",
                "operation": "afterOrEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -360,
        2540
      ],
      "id": "8feaedac-1f3c-4d5d-89e8-3e700e9011f1",
      "name": "If1"
    },
    {
      "parameters": {
        "jsCode": "/**\n * N8N Code Node - Expertise France Gestmax Job Scraper\n * \n * This script scrapes job postings from the Expertise France career website\n * using Puppeteer, handling pagination and extracting structured job data.\n * \n * Target URL: https://expertise-france.gestmax.fr/search/new\n */\n\n// Import Puppeteer\nconst puppeteer = require('puppeteer');\n\n/**\n * Main scraping function\n */\nasync function scrapeGestmaxJobs() {\n  let browser;\n  const allJobs = [];\n\n  try {\n    // Launch Puppeteer browser in headless mode\n    console.log('ðŸš€ Launching browser...');\n    browser = await puppeteer.launch({\n      headless: true,\n      args: [\n        '--no-sandbox',\n        '--disable-setuid-sandbox',\n        '--disable-dev-shm-usage',\n        '--disable-accelerated-2d-canvas',\n        '--disable-gpu'\n      ]\n    });\n\n    const page = await browser.newPage();\n    \n    // Set viewport and user agent to avoid detection\n    await page.setViewport({ width: 1920, height: 1080 });\n    await page.setUserAgent('Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36');\n\n    // Navigate to the target URL\n    const targetURL = 'https://expertise-france.gestmax.fr/search/set-vacsearchfront_secteurs-017/domaines-d-expertises-education-enseignement-superieur-et-recherche-14';\n    console.log(`ðŸ“„ Navigating to: ${targetURL}`);\n    \n    await page.goto(targetURL, {\n      waitUntil: 'networkidle2',\n      timeout: 30000\n    });\n\n    let currentPage = 1;\n    let hasNextPage = true;\n    const maxPages = 50; // Safety limit to prevent infinite loops\n\n    // Pagination loop - continue until no \"Next\" button is found\n    while (hasNextPage && currentPage <= maxPages) {\n      console.log(`ðŸ“Š Scraping page ${currentPage}...`);\n\n      // Wait for job listings to load\n      await page.waitForSelector('div.searchlist-div > div > div', {\n        timeout: 10000\n      });\n\n      // Small delay to ensure content is fully rendered\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // Get all job containers\n      const jobContainers = await page.$$('div.searchlist-div > div > div');\n      console.log(`Found ${jobContainers.length} job containers`);\n\n      // Extract job data from each container using Puppeteer methods\n      for (const container of jobContainers) {\n        try {\n          const job = {\n            JobTitle: '',\n            JobURL: '',\n            Deadline: '',\n            Domaine: '',\n            Country: ''\n          };\n\n          // Extract Job URL and Job Title\n          const linkElement = await container.$('a:nth-child(1)');\n          if (linkElement) {\n            job.JobURL = await page.evaluate(el => el.href, linkElement);\n            \n            const titleElement = await linkElement.$('h2');\n            if (titleElement) {\n              job.JobTitle = await page.evaluate(el => el.textContent.trim(), titleElement);\n            }\n          }\n\n          // Extract Deadline - Multiple selector attempts for robustness\n          const deadlineSelectors = [\n            'div.text-grey.listdiv-value',\n            'div.listdiv-value.text-grey',\n            'div[class*=\"listdiv-value\"][class*=\"text-grey\"]',\n            'div.listdiv-item > div.text-grey',\n            'span.listdiv-value.text-grey'\n          ];\n\n          let deadlineText = '';\n          for (const selector of deadlineSelectors) {\n            const deadlineElement = await container.$(selector);\n            if (deadlineElement) {\n              deadlineText = await page.evaluate(el => el.textContent.trim(), deadlineElement);\n              if (deadlineText) {\n                console.log(`ðŸ“… Deadline found (raw): ${deadlineText}`);\n                break;\n              }\n            }\n          }\n\n          // If still not found, try extracting from page context\n          if (!deadlineText) {\n            deadlineText = await page.evaluate(el => {\n              // Look for any element containing date-like text\n              const allDivs = el.querySelectorAll('div, span');\n              for (const div of allDivs) {\n                const text = div.textContent.trim();\n                // Match date patterns like \"31/12/2024\" or \"31 dÃ©cembre 2024\"\n                if (text.match(/\\d{1,2}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{4}/) || \n                    text.match(/\\d{1,2}\\s+(janvier|fÃ©vrier|mars|avril|mai|juin|juillet|aoÃ»t|septembre|octobre|novembre|dÃ©cembre)\\s+\\d{4}/i)) {\n                  return text;\n                }\n              }\n              return '';\n            }, container);\n          }\n\n          // Clean and parse the deadline\n          if (deadlineText) {\n            // Remove \"Date de candidature : \" or similar prefixes\n            deadlineText = deadlineText.replace(/^(Date de candidature|Deadline|Date limite)\\s*:\\s*/i, '').trim();\n            \n            // Extract date in DD/MM/YYYY format\n            const dateMatch = deadlineText.match(/(\\d{1,2})[\\/\\-\\.](\\d{1,2})[\\/\\-\\.](\\d{4})/);\n            \n            if (dateMatch) {\n              const day = parseInt(dateMatch[1], 10);\n              const month = parseInt(dateMatch[2], 10) - 1; // Month is 0-indexed in JavaScript Date\n              const year = parseInt(dateMatch[3], 10);\n              \n              // Create JavaScript Date object and convert to ISO string with time at midnight UTC\n              const dateObj = new Date(Date.UTC(year, month, day, 0, 0, 0, 0));\n              job.Deadline = dateObj.toISOString();\n              console.log(`ðŸ“… Deadline parsed: ${job.Deadline}`);\n            } else {\n              // Try to parse French date format \"31 dÃ©cembre 2024\"\n              const frenchMonths = {\n                'janvier': 0, 'fÃ©vrier': 1, 'mars': 2, 'avril': 3,\n                'mai': 4, 'juin': 5, 'juillet': 6, 'aoÃ»t': 7,\n                'septembre': 8, 'octobre': 9, 'novembre': 10, 'dÃ©cembre': 11\n              };\n              \n              const frenchDateMatch = deadlineText.match(/(\\d{1,2})\\s+(janvier|fÃ©vrier|mars|avril|mai|juin|juillet|aoÃ»t|septembre|octobre|novembre|dÃ©cembre)\\s+(\\d{4})/i);\n              \n              if (frenchDateMatch) {\n                const day = parseInt(frenchDateMatch[1], 10);\n                const monthName = frenchDateMatch[2].toLowerCase();\n                const monthIndex = frenchMonths[monthName];\n                const year = parseInt(frenchDateMatch[3], 10);\n                \n                if (monthIndex !== undefined) {\n                  const dateObj = new Date(Date.UTC(year, monthIndex, day, 0, 0, 0, 0));\n                  job.Deadline = dateObj.toISOString();\n                  console.log(`ðŸ“… Deadline parsed (French): ${job.Deadline}`);\n                }\n              } else {\n                // If no pattern matched, store the cleaned text\n                job.Deadline = deadlineText;\n                console.log(`ðŸ“… Deadline stored as text: ${deadlineText}`);\n              }\n            }\n          }\n\n          // Extract Domaine (category)\n          const domaineElement = await container.$('div.listdiv-item.listdiv-vac_thematique > span.listdiv-value');\n          if (domaineElement) {\n            job.Domaine = await page.evaluate(el => el.textContent.trim(), domaineElement);\n          }\n\n          // Extract Country (usually country information)\n          try {\n            const extractedData = await page.evaluate(el => {\n              const data = {\n                country: '',\n                region: ''\n              };\n              \n              // Get all spans - typically span at index 2 is region, index 3 is country\n              const allSpans = el.querySelectorAll('span');\n              if (allSpans.length >= 3) {\n                // Index 2 is usually the region\n                data.region = allSpans[1].textContent.trim();\n                // Index 3 is usually the country\n                data.country = allSpans[2].textContent.trim();\n              }\n              \n              return data;\n            }, container);\n            \n            // Use country as Country, or combine region and country\n            if (extractedData.country) {\n              job.Country = extractedData.country;\n            } else if (extractedData.region) {\n              job.Country = extractedData.region;\n            }\n            \n            console.log(`ðŸŒ Country: ${job.Country}`);\n            \n          } catch (extractError) {\n            console.log(`Extract error for Country: ${extractError.message}`);\n          }\n\n          // Only add job if it has at least a title or URL\n          if (job.JobTitle || job.JobURL) {\n            allJobs.push(job);\n            console.log(`âœ… Job added: ${job.JobTitle.substring(0, 50)}... | Deadline: ${job.Deadline || 'Not found'}`);\n          }\n\n        } catch (error) {\n          console.error('Error extracting job data from container:', error.message);\n        }\n      }\n\n      console.log(`âœ… Found ${jobContainers.length} jobs on page ${currentPage}`);\n\n      // Check if \"Next\" button exists and is clickable\n      const nextButtonSelector = '#pager > ul > li > a[rel=\"next\"]';\n      \n      // Alternative selectors\n      const nextButtonAltSelectors = [\n        'li.next > a',\n        'li.page-item.next > a',\n        'a[aria-label=\"Next\"]',\n        '#pager > ul > li:last-child > a'\n      ];\n\n      try {\n        // Try to find the next button using primary selector\n        let nextButton = await page.$(nextButtonSelector);\n        \n        // If not found, try alternative selectors\n        if (!nextButton) {\n          for (const altSelector of nextButtonAltSelectors) {\n            nextButton = await page.$(altSelector);\n            if (nextButton) {\n              console.log(`Found next button with selector: ${altSelector}`);\n              break;\n            }\n          }\n        }\n\n        if (nextButton) {\n          // Check if the next button is disabled or if we're on the last page\n          const isDisabled = await page.evaluate((btn) => {\n            const listItem = btn.closest('li');\n            return (listItem && listItem.classList.contains('disabled')) || \n                   !btn.href || \n                   btn.href === 'javascript:void(0)' ||\n                   btn.classList.contains('disabled');\n          }, nextButton);\n\n          if (!isDisabled) {\n            console.log('â­ï¸  Navigating to next page...');\n            \n            const currentUrl = page.url();\n            await nextButton.click();\n            \n            await page.waitForNavigation({ \n              waitUntil: 'networkidle2', \n              timeout: 15000 \n            }).catch(() => {\n              console.log('Navigation timeout - checking if page changed...');\n            });\n            \n            const newUrl = page.url();\n            if (currentUrl === newUrl) {\n              console.log('ðŸ URL did not change - reached last page');\n              hasNextPage = false;\n            } else {\n              currentPage++;\n              await new Promise(resolve => setTimeout(resolve, 1500));\n            }\n          } else {\n            console.log('ðŸ Reached last page (Next button is disabled)');\n            hasNextPage = false;\n          }\n        } else {\n          console.log('ðŸ No more pages (Next button not found)');\n          hasNextPage = false;\n        }\n      } catch (navError) {\n        console.log('ðŸ Pagination ended:', navError.message);\n        hasNextPage = false;\n      }\n    }\n\n    console.log(`\\nâœ¨ Scraping complete! Total jobs found: ${allJobs.length}`);\n\n  } catch (error) {\n    console.error('âŒ Error during scraping:', error.message);\n    console.error('Stack:', error.stack);\n    throw error;\n  } finally {\n    if (browser) {\n      await browser.close();\n      console.log('ðŸ”’ Browser closed');\n    }\n  }\n\n  return allJobs;\n}\n\n/**\n * Main execution function for n8n Code Node\n */\nasync function main() {\n  try {\n    console.log('Starting scraper...');\n    const jobs = await scrapeGestmaxJobs();\n\n    if (!jobs || jobs.length === 0) {\n      console.log('âš ï¸ No jobs found');\n      return [{\n        json: {\n          error: false,\n          message: 'No jobs found',\n          count: 0\n        }\n      }];\n    }\n\n    const output = jobs.map(job => ({\n      json: job\n    }));\n\n    console.log(`\\nðŸ“¦ Returning ${output.length} job items to n8n`);\n    console.log(`Sample output:`, JSON.stringify(output[0], null, 2));\n    return output;\n\n  } catch (error) {\n    console.error('âŒ Fatal error:', error);\n    console.error('Stack:', error.stack);\n    \n    return [{\n      json: {\n        error: true,\n        message: error.message,\n        stack: error.stack\n      }\n    }];\n  }\n}\n\n// Execute the main function and return results\nreturn await main();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1140,
        2540
      ],
      "id": "524a7e71-3a61-4d69-87c1-caa1c0f5d5cc",
      "name": "Expertise France ( Domaine Enesignement De Recherche )"
    },
    {
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -920,
        2960
      ],
      "id": "b261aa34-c18e-4390-b2c5-deb59e1d2f48",
      "name": "Loop Over Items5"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a8f5fcb9-78e1-46a6-9a5a-1d5ba80360f9",
              "leftValue": "={{ $('Loop Over Items5').item.json.Deadline }}",
              "rightValue": "={{ $json.convertedTime }}",
              "operator": {
                "type": "dateTime",
                "operation": "afterOrEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -400,
        2880
      ],
      "id": "0c5bf971-28b8-42ed-a628-1df0161c04aa",
      "name": "If2"
    },
    {
      "parameters": {
        "jsCode": "/**\n * N8N Code Node - Expertise France Gestmax Job Scraper\n * \n * This script scrapes job postings from the Expertise France career website\n * using Puppeteer, handling pagination and extracting structured job data.\n * \n * Target URL: https://expertise-france.gestmax.fr/search/new\n */\n\n// Import Puppeteer\nconst puppeteer = require('puppeteer');\n\n/**\n * Main scraping function\n */\nasync function scrapeGestmaxJobs() {\n  let browser;\n  const allJobs = [];\n\n  try {\n    // Launch Puppeteer browser in headless mode\n    console.log('ðŸš€ Launching browser...');\n    browser = await puppeteer.launch({\n      headless: true,\n      args: [\n        '--no-sandbox',\n        '--disable-setuid-sandbox',\n        '--disable-dev-shm-usage',\n        '--disable-accelerated-2d-canvas',\n        '--disable-gpu'\n      ]\n    });\n\n    const page = await browser.newPage();\n    \n    // Set viewport and user agent to avoid detection\n    await page.setViewport({ width: 1920, height: 1080 });\n    await page.setUserAgent('Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36');\n\n    // Navigate to the target URL\n    const targetURL = 'https://expertise-france.gestmax.fr/search/set-vacsearchfront_secteurs-042/domaines-d-expertises-justice-4';\n    console.log(`ðŸ“„ Navigating to: ${targetURL}`);\n    \n    await page.goto(targetURL, {\n      waitUntil: 'networkidle2',\n      timeout: 30000\n    });\n\n    let currentPage = 1;\n    let hasNextPage = true;\n    const maxPages = 50; // Safety limit to prevent infinite loops\n\n    // Pagination loop - continue until no \"Next\" button is found\n    while (hasNextPage && currentPage <= maxPages) {\n      console.log(`ðŸ“Š Scraping page ${currentPage}...`);\n\n      // Wait for job listings to load\n      await page.waitForSelector('div.searchlist-div > div > div', {\n        timeout: 10000\n      });\n\n      // Small delay to ensure content is fully rendered\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // Get all job containers\n      const jobContainers = await page.$$('div.searchlist-div > div > div');\n      console.log(`Found ${jobContainers.length} job containers`);\n\n      // Extract job data from each container using Puppeteer methods\n      for (const container of jobContainers) {\n        try {\n          const job = {\n            JobTitle: '',\n            JobURL: '',\n            Deadline: '',\n            Domaine: '',\n            Country: ''\n          };\n\n          // Extract Job URL and Job Title\n          const linkElement = await container.$('a:nth-child(1)');\n          if (linkElement) {\n            job.JobURL = await page.evaluate(el => el.href, linkElement);\n            \n            const titleElement = await linkElement.$('h2');\n            if (titleElement) {\n              job.JobTitle = await page.evaluate(el => el.textContent.trim(), titleElement);\n            }\n          }\n\n          // Extract Deadline - Multiple selector attempts for robustness\n          const deadlineSelectors = [\n            'div.text-grey.listdiv-value',\n            'div.listdiv-value.text-grey',\n            'div[class*=\"listdiv-value\"][class*=\"text-grey\"]',\n            'div.listdiv-item > div.text-grey',\n            'span.listdiv-value.text-grey'\n          ];\n\n          let deadlineText = '';\n          for (const selector of deadlineSelectors) {\n            const deadlineElement = await container.$(selector);\n            if (deadlineElement) {\n              deadlineText = await page.evaluate(el => el.textContent.trim(), deadlineElement);\n              if (deadlineText) {\n                console.log(`ðŸ“… Deadline found (raw): ${deadlineText}`);\n                break;\n              }\n            }\n          }\n\n          // If still not found, try extracting from page context\n          if (!deadlineText) {\n            deadlineText = await page.evaluate(el => {\n              // Look for any element containing date-like text\n              const allDivs = el.querySelectorAll('div, span');\n              for (const div of allDivs) {\n                const text = div.textContent.trim();\n                // Match date patterns like \"31/12/2024\" or \"31 dÃ©cembre 2024\"\n                if (text.match(/\\d{1,2}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{4}/) || \n                    text.match(/\\d{1,2}\\s+(janvier|fÃ©vrier|mars|avril|mai|juin|juillet|aoÃ»t|septembre|octobre|novembre|dÃ©cembre)\\s+\\d{4}/i)) {\n                  return text;\n                }\n              }\n              return '';\n            }, container);\n          }\n\n          // Clean and parse the deadline\n          if (deadlineText) {\n            // Remove \"Date de candidature : \" or similar prefixes\n            deadlineText = deadlineText.replace(/^(Date de candidature|Deadline|Date limite)\\s*:\\s*/i, '').trim();\n            \n            // Extract date in DD/MM/YYYY format\n            const dateMatch = deadlineText.match(/(\\d{1,2})[\\/\\-\\.](\\d{1,2})[\\/\\-\\.](\\d{4})/);\n            \n            if (dateMatch) {\n              const day = parseInt(dateMatch[1], 10);\n              const month = parseInt(dateMatch[2], 10) - 1; // Month is 0-indexed in JavaScript Date\n              const year = parseInt(dateMatch[3], 10);\n              \n              // Create JavaScript Date object and convert to ISO string with time at midnight UTC\n              const dateObj = new Date(Date.UTC(year, month, day, 0, 0, 0, 0));\n              job.Deadline = dateObj.toISOString();\n              console.log(`ðŸ“… Deadline parsed: ${job.Deadline}`);\n            } else {\n              // Try to parse French date format \"31 dÃ©cembre 2024\"\n              const frenchMonths = {\n                'janvier': 0, 'fÃ©vrier': 1, 'mars': 2, 'avril': 3,\n                'mai': 4, 'juin': 5, 'juillet': 6, 'aoÃ»t': 7,\n                'septembre': 8, 'octobre': 9, 'novembre': 10, 'dÃ©cembre': 11\n              };\n              \n              const frenchDateMatch = deadlineText.match(/(\\d{1,2})\\s+(janvier|fÃ©vrier|mars|avril|mai|juin|juillet|aoÃ»t|septembre|octobre|novembre|dÃ©cembre)\\s+(\\d{4})/i);\n              \n              if (frenchDateMatch) {\n                const day = parseInt(frenchDateMatch[1], 10);\n                const monthName = frenchDateMatch[2].toLowerCase();\n                const monthIndex = frenchMonths[monthName];\n                const year = parseInt(frenchDateMatch[3], 10);\n                \n                if (monthIndex !== undefined) {\n                  const dateObj = new Date(Date.UTC(year, monthIndex, day, 0, 0, 0, 0));\n                  job.Deadline = dateObj.toISOString();\n                  console.log(`ðŸ“… Deadline parsed (French): ${job.Deadline}`);\n                }\n              } else {\n                // If no pattern matched, store the cleaned text\n                job.Deadline = deadlineText;\n                console.log(`ðŸ“… Deadline stored as text: ${deadlineText}`);\n              }\n            }\n          }\n\n          // Extract Domaine (category)\n          const domaineElement = await container.$('div.listdiv-item.listdiv-vac_thematique > span.listdiv-value');\n          if (domaineElement) {\n            job.Domaine = await page.evaluate(el => el.textContent.trim(), domaineElement);\n          }\n\n          // Extract Country (usually country information)\n          try {\n            const extractedData = await page.evaluate(el => {\n              const data = {\n                country: '',\n                region: ''\n              };\n              \n              // Get all spans - typically span at index 2 is region, index 3 is country\n              const allSpans = el.querySelectorAll('span');\n              if (allSpans.length >= 3) {\n                // Index 2 is usually the region\n                data.region = allSpans[1].textContent.trim();\n                // Index 3 is usually the country\n                data.country = allSpans[2].textContent.trim();\n              }\n              \n              return data;\n            }, container);\n            \n            // Use country as Country, or combine region and country\n            if (extractedData.country) {\n              job.Country = extractedData.country;\n            } else if (extractedData.region) {\n              job.Country = extractedData.region;\n            }\n            \n            console.log(`ðŸŒ Country: ${job.Country}`);\n            \n          } catch (extractError) {\n            console.log(`Extract error for Country: ${extractError.message}`);\n          }\n\n          // Only add job if it has at least a title or URL\n          if (job.JobTitle || job.JobURL) {\n            allJobs.push(job);\n            console.log(`âœ… Job added: ${job.JobTitle.substring(0, 50)}... | Deadline: ${job.Deadline || 'Not found'}`);\n          }\n\n        } catch (error) {\n          console.error('Error extracting job data from container:', error.message);\n        }\n      }\n\n      console.log(`âœ… Found ${jobContainers.length} jobs on page ${currentPage}`);\n\n      // Check if \"Next\" button exists and is clickable\n      const nextButtonSelector = '#pager > ul > li > a[rel=\"next\"]';\n      \n      // Alternative selectors\n      const nextButtonAltSelectors = [\n        'li.next > a',\n        'li.page-item.next > a',\n        'a[aria-label=\"Next\"]',\n        '#pager > ul > li:last-child > a'\n      ];\n\n      try {\n        // Try to find the next button using primary selector\n        let nextButton = await page.$(nextButtonSelector);\n        \n        // If not found, try alternative selectors\n        if (!nextButton) {\n          for (const altSelector of nextButtonAltSelectors) {\n            nextButton = await page.$(altSelector);\n            if (nextButton) {\n              console.log(`Found next button with selector: ${altSelector}`);\n              break;\n            }\n          }\n        }\n\n        if (nextButton) {\n          // Check if the next button is disabled or if we're on the last page\n          const isDisabled = await page.evaluate((btn) => {\n            const listItem = btn.closest('li');\n            return (listItem && listItem.classList.contains('disabled')) || \n                   !btn.href || \n                   btn.href === 'javascript:void(0)' ||\n                   btn.classList.contains('disabled');\n          }, nextButton);\n\n          if (!isDisabled) {\n            console.log('â­ï¸  Navigating to next page...');\n            \n            const currentUrl = page.url();\n            await nextButton.click();\n            \n            await page.waitForNavigation({ \n              waitUntil: 'networkidle2', \n              timeout: 15000 \n            }).catch(() => {\n              console.log('Navigation timeout - checking if page changed...');\n            });\n            \n            const newUrl = page.url();\n            if (currentUrl === newUrl) {\n              console.log('ðŸ URL did not change - reached last page');\n              hasNextPage = false;\n            } else {\n              currentPage++;\n              await new Promise(resolve => setTimeout(resolve, 1500));\n            }\n          } else {\n            console.log('ðŸ Reached last page (Next button is disabled)');\n            hasNextPage = false;\n          }\n        } else {\n          console.log('ðŸ No more pages (Next button not found)');\n          hasNextPage = false;\n        }\n      } catch (navError) {\n        console.log('ðŸ Pagination ended:', navError.message);\n        hasNextPage = false;\n      }\n    }\n\n    console.log(`\\nâœ¨ Scraping complete! Total jobs found: ${allJobs.length}`);\n\n  } catch (error) {\n    console.error('âŒ Error during scraping:', error.message);\n    console.error('Stack:', error.stack);\n    throw error;\n  } finally {\n    if (browser) {\n      await browser.close();\n      console.log('ðŸ”’ Browser closed');\n    }\n  }\n\n  return allJobs;\n}\n\n/**\n * Main execution function for n8n Code Node\n */\nasync function main() {\n  try {\n    console.log('Starting scraper...');\n    const jobs = await scrapeGestmaxJobs();\n\n    if (!jobs || jobs.length === 0) {\n      console.log('âš ï¸ No jobs found');\n      return [{\n        json: {\n          error: false,\n          message: 'No jobs found',\n          count: 0\n        }\n      }];\n    }\n\n    const output = jobs.map(job => ({\n      json: job\n    }));\n\n    console.log(`\\nðŸ“¦ Returning ${output.length} job items to n8n`);\n    console.log(`Sample output:`, JSON.stringify(output[0], null, 2));\n    return output;\n\n  } catch (error) {\n    console.error('âŒ Fatal error:', error);\n    console.error('Stack:', error.stack);\n    \n    return [{\n      json: {\n        error: true,\n        message: error.message,\n        stack: error.stack\n      }\n    }];\n  }\n}\n\n// Execute the main function and return results\nreturn await main();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1140,
        2960
      ],
      "id": "b9de6cec-3d68-4490-851f-d3f9859d29cd",
      "name": "Expertise France ( Domaine Justice )"
    },
    {
      "parameters": {
        "jsCode": "/**\n * N8N Code Node - Expertise France Gestmax Job Scraper\n * \n * This script scrapes job postings from the Expertise France career website\n * using Puppeteer, handling pagination and extracting structured job data.\n * \n * Target URL: https://expertise-france.gestmax.fr/search/new\n */\n\n// Import Puppeteer\nconst puppeteer = require('puppeteer');\n\n/**\n * Main scraping function\n */\nasync function scrapeGestmaxJobs() {\n  let browser;\n  const allJobs = [];\n\n  try {\n    // Launch Puppeteer browser in headless mode\n    console.log('ðŸš€ Launching browser...');\n    browser = await puppeteer.launch({\n      headless: true,\n      args: [\n        '--no-sandbox',\n        '--disable-setuid-sandbox',\n        '--disable-dev-shm-usage',\n        '--disable-accelerated-2d-canvas',\n        '--disable-gpu'\n      ]\n    });\n\n    const page = await browser.newPage();\n    \n    // Set viewport and user agent to avoid detection\n    await page.setViewport({ width: 1920, height: 1080 });\n    await page.setUserAgent('Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36');\n\n    // Navigate to the target URL\n    const targetURL = 'https://expertise-france.gestmax.fr/search/set-vacsearchfront_secteurs-019/domaines-d-expertises-innovations-technologiques-7';\n    console.log(`ðŸ“„ Navigating to: ${targetURL}`);\n    \n    await page.goto(targetURL, {\n      waitUntil: 'networkidle2',\n      timeout: 30000\n    });\n\n    let currentPage = 1;\n    let hasNextPage = true;\n    const maxPages = 50; // Safety limit to prevent infinite loops\n\n    // Pagination loop - continue until no \"Next\" button is found\n    while (hasNextPage && currentPage <= maxPages) {\n      console.log(`ðŸ“Š Scraping page ${currentPage}...`);\n\n      // Wait for job listings to load\n      await page.waitForSelector('div.searchlist-div > div > div', {\n        timeout: 10000\n      });\n\n      // Small delay to ensure content is fully rendered\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // Get all job containers\n      const jobContainers = await page.$$('div.searchlist-div > div > div');\n      console.log(`Found ${jobContainers.length} job containers`);\n\n      // Extract job data from each container using Puppeteer methods\n      for (const container of jobContainers) {\n        try {\n          const job = {\n            JobTitle: '',\n            JobURL: '',\n            Deadline: '',\n            Domaine: '',\n            Country: ''\n          };\n\n          // Extract Job URL and Job Title\n          const linkElement = await container.$('a:nth-child(1)');\n          if (linkElement) {\n            job.JobURL = await page.evaluate(el => el.href, linkElement);\n            \n            const titleElement = await linkElement.$('h2');\n            if (titleElement) {\n              job.JobTitle = await page.evaluate(el => el.textContent.trim(), titleElement);\n            }\n          }\n\n          // Extract Deadline - Multiple selector attempts for robustness\n          const deadlineSelectors = [\n            'div.text-grey.listdiv-value',\n            'div.listdiv-value.text-grey',\n            'div[class*=\"listdiv-value\"][class*=\"text-grey\"]',\n            'div.listdiv-item > div.text-grey',\n            'span.listdiv-value.text-grey'\n          ];\n\n          let deadlineText = '';\n          for (const selector of deadlineSelectors) {\n            const deadlineElement = await container.$(selector);\n            if (deadlineElement) {\n              deadlineText = await page.evaluate(el => el.textContent.trim(), deadlineElement);\n              if (deadlineText) {\n                console.log(`ðŸ“… Deadline found (raw): ${deadlineText}`);\n                break;\n              }\n            }\n          }\n\n          // If still not found, try extracting from page context\n          if (!deadlineText) {\n            deadlineText = await page.evaluate(el => {\n              // Look for any element containing date-like text\n              const allDivs = el.querySelectorAll('div, span');\n              for (const div of allDivs) {\n                const text = div.textContent.trim();\n                // Match date patterns like \"31/12/2024\" or \"31 dÃ©cembre 2024\"\n                if (text.match(/\\d{1,2}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{4}/) || \n                    text.match(/\\d{1,2}\\s+(janvier|fÃ©vrier|mars|avril|mai|juin|juillet|aoÃ»t|septembre|octobre|novembre|dÃ©cembre)\\s+\\d{4}/i)) {\n                  return text;\n                }\n              }\n              return '';\n            }, container);\n          }\n\n          // Clean and parse the deadline\n          if (deadlineText) {\n            // Remove \"Date de candidature : \" or similar prefixes\n            deadlineText = deadlineText.replace(/^(Date de candidature|Deadline|Date limite)\\s*:\\s*/i, '').trim();\n            \n            // Extract date in DD/MM/YYYY format\n            const dateMatch = deadlineText.match(/(\\d{1,2})[\\/\\-\\.](\\d{1,2})[\\/\\-\\.](\\d{4})/);\n            \n            if (dateMatch) {\n              const day = parseInt(dateMatch[1], 10);\n              const month = parseInt(dateMatch[2], 10) - 1; // Month is 0-indexed in JavaScript Date\n              const year = parseInt(dateMatch[3], 10);\n              \n              // Create JavaScript Date object and convert to ISO string with time at midnight UTC\n              const dateObj = new Date(Date.UTC(year, month, day, 0, 0, 0, 0));\n              job.Deadline = dateObj.toISOString();\n              console.log(`ðŸ“… Deadline parsed: ${job.Deadline}`);\n            } else {\n              // Try to parse French date format \"31 dÃ©cembre 2024\"\n              const frenchMonths = {\n                'janvier': 0, 'fÃ©vrier': 1, 'mars': 2, 'avril': 3,\n                'mai': 4, 'juin': 5, 'juillet': 6, 'aoÃ»t': 7,\n                'septembre': 8, 'octobre': 9, 'novembre': 10, 'dÃ©cembre': 11\n              };\n              \n              const frenchDateMatch = deadlineText.match(/(\\d{1,2})\\s+(janvier|fÃ©vrier|mars|avril|mai|juin|juillet|aoÃ»t|septembre|octobre|novembre|dÃ©cembre)\\s+(\\d{4})/i);\n              \n              if (frenchDateMatch) {\n                const day = parseInt(frenchDateMatch[1], 10);\n                const monthName = frenchDateMatch[2].toLowerCase();\n                const monthIndex = frenchMonths[monthName];\n                const year = parseInt(frenchDateMatch[3], 10);\n                \n                if (monthIndex !== undefined) {\n                  const dateObj = new Date(Date.UTC(year, monthIndex, day, 0, 0, 0, 0));\n                  job.Deadline = dateObj.toISOString();\n                  console.log(`ðŸ“… Deadline parsed (French): ${job.Deadline}`);\n                }\n              } else {\n                // If no pattern matched, store the cleaned text\n                job.Deadline = deadlineText;\n                console.log(`ðŸ“… Deadline stored as text: ${deadlineText}`);\n              }\n            }\n          }\n\n          // Extract Domaine (category)\n          const domaineElement = await container.$('div.listdiv-item.listdiv-vac_thematique > span.listdiv-value');\n          if (domaineElement) {\n            job.Domaine = await page.evaluate(el => el.textContent.trim(), domaineElement);\n          }\n\n          // Extract Country (usually country information)\n          try {\n            const extractedData = await page.evaluate(el => {\n              const data = {\n                country: '',\n                region: ''\n              };\n              \n              // Get all spans - typically span at index 2 is region, index 3 is country\n              const allSpans = el.querySelectorAll('span');\n              if (allSpans.length >= 3) {\n                // Index 2 is usually the region\n                data.region = allSpans[1].textContent.trim();\n                // Index 3 is usually the country\n                data.country = allSpans[2].textContent.trim();\n              }\n              \n              return data;\n            }, container);\n            \n            // Use country as Country, or combine region and country\n            if (extractedData.country) {\n              job.Country = extractedData.country;\n            } else if (extractedData.region) {\n              job.Country = extractedData.region;\n            }\n            \n            console.log(`ðŸŒ Country: ${job.Country}`);\n            \n          } catch (extractError) {\n            console.log(`Extract error for Country: ${extractError.message}`);\n          }\n\n          // Only add job if it has at least a title or URL\n          if (job.JobTitle || job.JobURL) {\n            allJobs.push(job);\n            console.log(`âœ… Job added: ${job.JobTitle.substring(0, 50)}... | Deadline: ${job.Deadline || 'Not found'}`);\n          }\n\n        } catch (error) {\n          console.error('Error extracting job data from container:', error.message);\n        }\n      }\n\n      console.log(`âœ… Found ${jobContainers.length} jobs on page ${currentPage}`);\n\n      // Check if \"Next\" button exists and is clickable\n      const nextButtonSelector = '#pager > ul > li > a[rel=\"next\"]';\n      \n      // Alternative selectors\n      const nextButtonAltSelectors = [\n        'li.next > a',\n        'li.page-item.next > a',\n        'a[aria-label=\"Next\"]',\n        '#pager > ul > li:last-child > a'\n      ];\n\n      try {\n        // Try to find the next button using primary selector\n        let nextButton = await page.$(nextButtonSelector);\n        \n        // If not found, try alternative selectors\n        if (!nextButton) {\n          for (const altSelector of nextButtonAltSelectors) {\n            nextButton = await page.$(altSelector);\n            if (nextButton) {\n              console.log(`Found next button with selector: ${altSelector}`);\n              break;\n            }\n          }\n        }\n\n        if (nextButton) {\n          // Check if the next button is disabled or if we're on the last page\n          const isDisabled = await page.evaluate((btn) => {\n            const listItem = btn.closest('li');\n            return (listItem && listItem.classList.contains('disabled')) || \n                   !btn.href || \n                   btn.href === 'javascript:void(0)' ||\n                   btn.classList.contains('disabled');\n          }, nextButton);\n\n          if (!isDisabled) {\n            console.log('â­ï¸  Navigating to next page...');\n            \n            const currentUrl = page.url();\n            await nextButton.click();\n            \n            await page.waitForNavigation({ \n              waitUntil: 'networkidle2', \n              timeout: 15000 \n            }).catch(() => {\n              console.log('Navigation timeout - checking if page changed...');\n            });\n            \n            const newUrl = page.url();\n            if (currentUrl === newUrl) {\n              console.log('ðŸ URL did not change - reached last page');\n              hasNextPage = false;\n            } else {\n              currentPage++;\n              await new Promise(resolve => setTimeout(resolve, 1500));\n            }\n          } else {\n            console.log('ðŸ Reached last page (Next button is disabled)');\n            hasNextPage = false;\n          }\n        } else {\n          console.log('ðŸ No more pages (Next button not found)');\n          hasNextPage = false;\n        }\n      } catch (navError) {\n        console.log('ðŸ Pagination ended:', navError.message);\n        hasNextPage = false;\n      }\n    }\n\n    console.log(`\\nâœ¨ Scraping complete! Total jobs found: ${allJobs.length}`);\n\n  } catch (error) {\n    console.error('âŒ Error during scraping:', error.message);\n    console.error('Stack:', error.stack);\n    throw error;\n  } finally {\n    if (browser) {\n      await browser.close();\n      console.log('ðŸ”’ Browser closed');\n    }\n  }\n\n  return allJobs;\n}\n\n/**\n * Main execution function for n8n Code Node\n */\nasync function main() {\n  try {\n    console.log('Starting scraper...');\n    const jobs = await scrapeGestmaxJobs();\n\n    if (!jobs || jobs.length === 0) {\n      console.log('âš ï¸ No jobs found');\n      return [{\n        json: {\n          error: false,\n          message: 'No jobs found',\n          count: 0\n        }\n      }];\n    }\n\n    const output = jobs.map(job => ({\n      json: job\n    }));\n\n    console.log(`\\nðŸ“¦ Returning ${output.length} job items to n8n`);\n    console.log(`Sample output:`, JSON.stringify(output[0], null, 2));\n    return output;\n\n  } catch (error) {\n    console.error('âŒ Fatal error:', error);\n    console.error('Stack:', error.stack);\n    \n    return [{\n      json: {\n        error: true,\n        message: error.message,\n        stack: error.stack\n      }\n    }];\n  }\n}\n\n// Execute the main function and return results\nreturn await main();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1160,
        3880
      ],
      "id": "bec9914e-9b9f-49ec-bf33-bf7619574de4",
      "name": "Expertise France ( Domaine Innovation Technologique )"
    },
    {
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -940,
        3880
      ],
      "id": "f8c3a14b-dbb0-4a60-a6e0-013caa18d427",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a8f5fcb9-78e1-46a6-9a5a-1d5ba80360f9",
              "leftValue": "={{ $('Loop Over Items').item.json.Deadline }}",
              "rightValue": "={{ $json.convertedTime }}",
              "operator": {
                "type": "dateTime",
                "operation": "afterOrEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -500,
        3800
      ],
      "id": "99cac0aa-88d9-4682-a685-584c0c6198cc",
      "name": "If3"
    },
    {
      "parameters": {
        "jsCode": "/**\n * N8N Code Node - Expertise France Gestmax Job Scraper\n * \n * This script scrapes job postings from the Expertise France career website\n * using Puppeteer, handling pagination and extracting structured job data.\n * \n * Target URL: https://expertise-france.gestmax.fr/search/new\n */\n\n// Import Puppeteer\nconst puppeteer = require('puppeteer');\n\n/**\n * Main scraping function\n */\nasync function scrapeGestmaxJobs() {\n  let browser;\n  const allJobs = [];\n\n  try {\n    // Launch Puppeteer browser in headless mode\n    console.log('ðŸš€ Launching browser...');\n    browser = await puppeteer.launch({\n      headless: true,\n      args: [\n        '--no-sandbox',\n        '--disable-setuid-sandbox',\n        '--disable-dev-shm-usage',\n        '--disable-accelerated-2d-canvas',\n        '--disable-gpu'\n      ]\n    });\n\n    const page = await browser.newPage();\n    \n    // Set viewport and user agent to avoid detection\n    await page.setViewport({ width: 1920, height: 1080 });\n    await page.setUserAgent('Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36');\n\n    // Navigate to the target URL\n    const targetURL = 'https://expertise-france.gestmax.fr/search/set-vacsearchfront_secteurs-038/domaines-d-expertises-systeme-d-information-3';\n    console.log(`ðŸ“„ Navigating to: ${targetURL}`);\n    \n    await page.goto(targetURL, {\n      waitUntil: 'networkidle2',\n      timeout: 30000\n    });\n\n    let currentPage = 1;\n    let hasNextPage = true;\n    const maxPages = 50; // Safety limit to prevent infinite loops\n\n    // Pagination loop - continue until no \"Next\" button is found\n    while (hasNextPage && currentPage <= maxPages) {\n      console.log(`ðŸ“Š Scraping page ${currentPage}...`);\n\n      // Wait for job listings to load\n      await page.waitForSelector('div.searchlist-div > div > div', {\n        timeout: 10000\n      });\n\n      // Small delay to ensure content is fully rendered\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // Get all job containers\n      const jobContainers = await page.$$('div.searchlist-div > div > div');\n      console.log(`Found ${jobContainers.length} job containers`);\n\n      // Extract job data from each container using Puppeteer methods\n      for (const container of jobContainers) {\n        try {\n          const job = {\n            JobTitle: '',\n            JobURL: '',\n            Deadline: '',\n            Domaine: '',\n            Country: ''\n          };\n\n          // Extract Job URL and Job Title\n          const linkElement = await container.$('a:nth-child(1)');\n          if (linkElement) {\n            job.JobURL = await page.evaluate(el => el.href, linkElement);\n            \n            const titleElement = await linkElement.$('h2');\n            if (titleElement) {\n              job.JobTitle = await page.evaluate(el => el.textContent.trim(), titleElement);\n            }\n          }\n\n          // Extract Deadline - Multiple selector attempts for robustness\n          const deadlineSelectors = [\n            'div.text-grey.listdiv-value',\n            'div.listdiv-value.text-grey',\n            'div[class*=\"listdiv-value\"][class*=\"text-grey\"]',\n            'div.listdiv-item > div.text-grey',\n            'span.listdiv-value.text-grey'\n          ];\n\n          let deadlineText = '';\n          for (const selector of deadlineSelectors) {\n            const deadlineElement = await container.$(selector);\n            if (deadlineElement) {\n              deadlineText = await page.evaluate(el => el.textContent.trim(), deadlineElement);\n              if (deadlineText) {\n                console.log(`ðŸ“… Deadline found (raw): ${deadlineText}`);\n                break;\n              }\n            }\n          }\n\n          // If still not found, try extracting from page context\n          if (!deadlineText) {\n            deadlineText = await page.evaluate(el => {\n              // Look for any element containing date-like text\n              const allDivs = el.querySelectorAll('div, span');\n              for (const div of allDivs) {\n                const text = div.textContent.trim();\n                // Match date patterns like \"31/12/2024\" or \"31 dÃ©cembre 2024\"\n                if (text.match(/\\d{1,2}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{4}/) || \n                    text.match(/\\d{1,2}\\s+(janvier|fÃ©vrier|mars|avril|mai|juin|juillet|aoÃ»t|septembre|octobre|novembre|dÃ©cembre)\\s+\\d{4}/i)) {\n                  return text;\n                }\n              }\n              return '';\n            }, container);\n          }\n\n          // Clean and parse the deadline\n          if (deadlineText) {\n            // Remove \"Date de candidature : \" or similar prefixes\n            deadlineText = deadlineText.replace(/^(Date de candidature|Deadline|Date limite)\\s*:\\s*/i, '').trim();\n            \n            // Extract date in DD/MM/YYYY format\n            const dateMatch = deadlineText.match(/(\\d{1,2})[\\/\\-\\.](\\d{1,2})[\\/\\-\\.](\\d{4})/);\n            \n            if (dateMatch) {\n              const day = parseInt(dateMatch[1], 10);\n              const month = parseInt(dateMatch[2], 10) - 1; // Month is 0-indexed in JavaScript Date\n              const year = parseInt(dateMatch[3], 10);\n              \n              // Create JavaScript Date object and convert to ISO string with time at midnight UTC\n              const dateObj = new Date(Date.UTC(year, month, day, 0, 0, 0, 0));\n              job.Deadline = dateObj.toISOString();\n              console.log(`ðŸ“… Deadline parsed: ${job.Deadline}`);\n            } else {\n              // Try to parse French date format \"31 dÃ©cembre 2024\"\n              const frenchMonths = {\n                'janvier': 0, 'fÃ©vrier': 1, 'mars': 2, 'avril': 3,\n                'mai': 4, 'juin': 5, 'juillet': 6, 'aoÃ»t': 7,\n                'septembre': 8, 'octobre': 9, 'novembre': 10, 'dÃ©cembre': 11\n              };\n              \n              const frenchDateMatch = deadlineText.match(/(\\d{1,2})\\s+(janvier|fÃ©vrier|mars|avril|mai|juin|juillet|aoÃ»t|septembre|octobre|novembre|dÃ©cembre)\\s+(\\d{4})/i);\n              \n              if (frenchDateMatch) {\n                const day = parseInt(frenchDateMatch[1], 10);\n                const monthName = frenchDateMatch[2].toLowerCase();\n                const monthIndex = frenchMonths[monthName];\n                const year = parseInt(frenchDateMatch[3], 10);\n                \n                if (monthIndex !== undefined) {\n                  const dateObj = new Date(Date.UTC(year, monthIndex, day, 0, 0, 0, 0));\n                  job.Deadline = dateObj.toISOString();\n                  console.log(`ðŸ“… Deadline parsed (French): ${job.Deadline}`);\n                }\n              } else {\n                // If no pattern matched, store the cleaned text\n                job.Deadline = deadlineText;\n                console.log(`ðŸ“… Deadline stored as text: ${deadlineText}`);\n              }\n            }\n          }\n\n          // Extract Domaine (category)\n          const domaineElement = await container.$('div.listdiv-item.listdiv-vac_thematique > span.listdiv-value');\n          if (domaineElement) {\n            job.Domaine = await page.evaluate(el => el.textContent.trim(), domaineElement);\n          }\n\n          // Extract Country (usually country information)\n          try {\n            const extractedData = await page.evaluate(el => {\n              const data = {\n                country: '',\n                region: ''\n              };\n              \n              // Get all spans - typically span at index 2 is region, index 3 is country\n              const allSpans = el.querySelectorAll('span');\n              if (allSpans.length >= 3) {\n                // Index 2 is usually the region\n                data.region = allSpans[1].textContent.trim();\n                // Index 3 is usually the country\n                data.country = allSpans[2].textContent.trim();\n              }\n              \n              return data;\n            }, container);\n            \n            // Use country as Country, or combine region and country\n            if (extractedData.country) {\n              job.Country = extractedData.country;\n            } else if (extractedData.region) {\n              job.Country = extractedData.region;\n            }\n            \n            console.log(`ðŸŒ Country: ${job.Country}`);\n            \n          } catch (extractError) {\n            console.log(`Extract error for Country: ${extractError.message}`);\n          }\n\n          // Only add job if it has at least a title or URL\n          if (job.JobTitle || job.JobURL) {\n            allJobs.push(job);\n            console.log(`âœ… Job added: ${job.JobTitle.substring(0, 50)}... | Deadline: ${job.Deadline || 'Not found'}`);\n          }\n\n        } catch (error) {\n          console.error('Error extracting job data from container:', error.message);\n        }\n      }\n\n      console.log(`âœ… Found ${jobContainers.length} jobs on page ${currentPage}`);\n\n      // Check if \"Next\" button exists and is clickable\n      const nextButtonSelector = '#pager > ul > li > a[rel=\"next\"]';\n      \n      // Alternative selectors\n      const nextButtonAltSelectors = [\n        'li.next > a',\n        'li.page-item.next > a',\n        'a[aria-label=\"Next\"]',\n        '#pager > ul > li:last-child > a'\n      ];\n\n      try {\n        // Try to find the next button using primary selector\n        let nextButton = await page.$(nextButtonSelector);\n        \n        // If not found, try alternative selectors\n        if (!nextButton) {\n          for (const altSelector of nextButtonAltSelectors) {\n            nextButton = await page.$(altSelector);\n            if (nextButton) {\n              console.log(`Found next button with selector: ${altSelector}`);\n              break;\n            }\n          }\n        }\n\n        if (nextButton) {\n          // Check if the next button is disabled or if we're on the last page\n          const isDisabled = await page.evaluate((btn) => {\n            const listItem = btn.closest('li');\n            return (listItem && listItem.classList.contains('disabled')) || \n                   !btn.href || \n                   btn.href === 'javascript:void(0)' ||\n                   btn.classList.contains('disabled');\n          }, nextButton);\n\n          if (!isDisabled) {\n            console.log('â­ï¸  Navigating to next page...');\n            \n            const currentUrl = page.url();\n            await nextButton.click();\n            \n            await page.waitForNavigation({ \n              waitUntil: 'networkidle2', \n              timeout: 15000 \n            }).catch(() => {\n              console.log('Navigation timeout - checking if page changed...');\n            });\n            \n            const newUrl = page.url();\n            if (currentUrl === newUrl) {\n              console.log('ðŸ URL did not change - reached last page');\n              hasNextPage = false;\n            } else {\n              currentPage++;\n              await new Promise(resolve => setTimeout(resolve, 1500));\n            }\n          } else {\n            console.log('ðŸ Reached last page (Next button is disabled)');\n            hasNextPage = false;\n          }\n        } else {\n          console.log('ðŸ No more pages (Next button not found)');\n          hasNextPage = false;\n        }\n      } catch (navError) {\n        console.log('ðŸ Pagination ended:', navError.message);\n        hasNextPage = false;\n      }\n    }\n\n    console.log(`\\nâœ¨ Scraping complete! Total jobs found: ${allJobs.length}`);\n\n  } catch (error) {\n    console.error('âŒ Error during scraping:', error.message);\n    console.error('Stack:', error.stack);\n    throw error;\n  } finally {\n    if (browser) {\n      await browser.close();\n      console.log('ðŸ”’ Browser closed');\n    }\n  }\n\n  return allJobs;\n}\n\n/**\n * Main execution function for n8n Code Node\n */\nasync function main() {\n  try {\n    console.log('Starting scraper...');\n    const jobs = await scrapeGestmaxJobs();\n\n    if (!jobs || jobs.length === 0) {\n      console.log('âš ï¸ No jobs found');\n      return [{\n        json: {\n          error: false,\n          message: 'No jobs found',\n          count: 0\n        }\n      }];\n    }\n\n    const output = jobs.map(job => ({\n      json: job\n    }));\n\n    console.log(`\\nðŸ“¦ Returning ${output.length} job items to n8n`);\n    console.log(`Sample output:`, JSON.stringify(output[0], null, 2));\n    return output;\n\n  } catch (error) {\n    console.error('âŒ Fatal error:', error);\n    console.error('Stack:', error.stack);\n    \n    return [{\n      json: {\n        error: true,\n        message: error.message,\n        stack: error.stack\n      }\n    }];\n  }\n}\n\n// Execute the main function and return results\nreturn await main();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1160,
        3460
      ],
      "id": "5e5a04c3-66ee-4601-b786-da819b084913",
      "name": "Expertise France ( Domaine System D'information )"
    },
    {
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -860,
        1860
      ],
      "id": "5f31f6b0-e225-4dda-97a4-b836a2b66e4d",
      "name": "Loop Over Items6"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a8f5fcb9-78e1-46a6-9a5a-1d5ba80360f9",
              "leftValue": "={{ $json.output.Deadline }}",
              "rightValue": "={{ $now }}",
              "operator": {
                "type": "dateTime",
                "operation": "afterOrEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -280,
        1840
      ],
      "id": "838ed4d0-44e3-484c-8e3b-99d4d394bd38",
      "name": "If5"
    },
    {
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -860,
        2120
      ],
      "id": "37ad4ad6-4fe5-489e-b8df-9abdf69bc85a",
      "name": "Loop Over Items7"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a8f5fcb9-78e1-46a6-9a5a-1d5ba80360f9",
              "leftValue": "={{ $('OpenAI').item.json.message.content }}",
              "rightValue": "={{ $now }}",
              "operator": {
                "type": "dateTime",
                "operation": "afterOrEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        780,
        2120
      ],
      "id": "4a1ef179-fdc6-4bda-8dff-a4715b15ffda",
      "name": "If6"
    },
    {
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -820,
        1480
      ],
      "id": "e6cf6483-49a2-460d-af8e-658f59a689d2",
      "name": "Loop Over Items1"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "a8f5fcb9-78e1-46a6-9a5a-1d5ba80360f9",
              "leftValue": "={{ $('Information Extractor2').item.json.output.Deadline }}",
              "rightValue": "={{ $json.convertedTime }}",
              "operator": {
                "type": "dateTime",
                "operation": "afterOrEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        340,
        1500
      ],
      "id": "4b10a518-5d89-4d1e-b451-4be867f9350d",
      "name": "If7"
    },
    {
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -840,
        1080
      ],
      "id": "90047b10-e9c9-4ae9-9a3e-6b4f46a80748",
      "name": "Loop Over Items8"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "a8f5fcb9-78e1-46a6-9a5a-1d5ba80360f9",
              "leftValue": "={{ $('Loop Over Items8').item.json.deadline }}",
              "rightValue": "={{ $json.convertedTime }}",
              "operator": {
                "type": "dateTime",
                "operation": "afterOrEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -420,
        1040
      ],
      "id": "f2e1b0d5-bbdb-4ac6-ae52-5367f9806ed7",
      "name": "If4"
    },
    {
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -640,
        360
      ],
      "id": "e2b710cd-a8ea-4d17-8685-9f7d2aec07b6",
      "name": "Loop Over Items9"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "a8f5fcb9-78e1-46a6-9a5a-1d5ba80360f9",
              "leftValue": "={{ $('Loop Over Items9').item.json.Deadline }}",
              "rightValue": "={{ $json.convertedTime }}",
              "operator": {
                "type": "dateTime",
                "operation": "afterOrEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -200,
        380
      ],
      "id": "a5cdc6e2-5c3d-4349-8c00-aac0e8cf49d3",
      "name": "If8"
    },
    {
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -860,
        700
      ],
      "id": "7e189d26-4b1a-4455-92af-75b5cffdb593",
      "name": "Loop Over Items10"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a8f5fcb9-78e1-46a6-9a5a-1d5ba80360f9",
              "leftValue": "={{ $('Loop Over Items10').item.json.deadline }}",
              "rightValue": "={{ $json.convertedTime }}",
              "operator": {
                "type": "dateTime",
                "operation": "afterOrEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -440,
        720
      ],
      "id": "252ab829-1db4-4ef0-90d1-939deb1937c6",
      "name": "If9"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a8f5fcb9-78e1-46a6-9a5a-1d5ba80360f9",
              "leftValue": "={{ $('Loop Over Items11').item.json.Deadline }}",
              "rightValue": "={{ $('Code9').item.json.convertedTime }}",
              "operator": {
                "type": "dateTime",
                "operation": "afterOrEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        900,
        100
      ],
      "id": "57a2d960-e1aa-426b-8713-b64841b30fa5",
      "name": "If10"
    },
    {
      "parameters": {
        "text": "=Title : {{ $('ADB (Description you need to an information extraction node or filter because the job url does not modify with the filtered job fields').item.json.Title }}\n\nURL : {{ $('ADB (Description you need to an information extraction node or filter because the job url does not modify with the filtered job fields').item.json.Link }}\n\nJob Description : {{ $json.data.modelResponse }}\n\nDeadline : {{ $('ADB (Description you need to an information extraction node or filter because the job url does not modify with the filtered job fields').item.json.Deadline }}\n\n",
        "schemaType": "fromJson",
        "jsonSchemaExample": "{\n  \"Title\": \"Policy Officer\",\n  \"Link\": \"https://example.eu/jobs/policy-officer\",\n  \"Deadline\": \"2025-11-11T09:39:10.615-05:00\",\n  \"Truth\" : \"IT related\"\n}\n",
        "options": {
          "systemPromptTemplate": "From the given job titles and descriptions, extract only those that clearly belong to the Information Technology (IT) field, including but not limited to software development, IT support, data analysis, systems\nadministration, and related domains.\n\nIf the job is an IT related job return also a variable Truth if it is IT related or not\n\nReturn the deadline value in ISO format"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.informationExtractor",
      "typeVersion": 1,
      "position": [
        -20,
        80
      ],
      "id": "b19a4bab-1b29-414b-9a4e-5ed230839d21",
      "name": "Information Extractor"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-3.5-turbo",
          "mode": "list",
          "cachedResultName": "gpt-3.5-turbo"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -40,
        -100
      ],
      "id": "aaf0f48a-c1b7-4058-bc3a-3450b4670f03",
      "name": "OpenAI Chat Model2",
      "credentials": {
        "openAiApi": {
          "id": "2MDWCmImtzvTuZSK",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Compatible n8n Code Node for AFD Jobs Scraping with Pagination - With Deadline & Location Extraction\nconst puppeteer = require('puppeteer');\n\nasync function scrapeAFDJobsWithPagination() {\n  let browser = null;\n  \n  try {\n    browser = await puppeteer.launch({ \n      headless: true,\n      defaultViewport: { width: 1920, height: 1080 },\n      args: [\n        '--no-sandbox', \n        '--disable-setuid-sandbox', \n        '--disable-dev-shm-usage',\n        '--disable-blink-features=AutomationControlled',\n        '--disable-accelerated-2d-canvas',\n        '--no-first-run',\n        '--no-zygote',\n        '--disable-gpu'\n      ],\n      protocolTimeout: 180000,\n      timeout: 60000\n    });\n\n    const page = await browser.newPage();\n    \n    await page.setUserAgent('Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36');\n    \n    console.log('Navigating to AFD careers page...');\n    await page.goto('https://afd.csod.com/ux/ats/careersite/5/home?c=afd&cfdd[0][id]=141&cfdd[0][options][0]=128&lang=en-US', {\n      waitUntil: 'networkidle2',\n      timeout: 45000\n    });\n\n    console.log('Waiting for content to load...');\n    await new Promise(resolve => setTimeout(resolve, 8000));\n\n    let allJobs = [];\n    let currentPage = 1;\n    let maxPages = 10;\n    let totalPagesFound = 0;\n\n    while (currentPage <= maxPages) {\n      console.log(`\\n=== Processing Page ${currentPage} ===`);\n      \n      if (currentPage > 1) {\n        await new Promise(resolve => setTimeout(resolve, 5000));\n      }\n\n      const pageInfo = await page.evaluate(() => {\n        const title = document.title || 'No title';\n        const bodyText = document.body ? document.body.innerText : 'No body';\n        const url = window.location.href;\n        \n        return {\n          title,\n          bodyLength: bodyText.length,\n          url,\n          firstChars: bodyText.substring(0, 300),\n          allLinks: Array.from(document.querySelectorAll('a')).map(a => ({\n            text: (a.textContent || '').trim().substring(0, 100),\n            href: a.href,\n            classes: a.className\n          })).filter(link => link.text.length > 0),\n          potentialJobElements: Array.from(document.querySelectorAll('*')).filter(el => {\n            const text = (el.textContent || '').trim();\n            return text.length > 10 && text.length < 200 && \n                   /job|position|poste|emploi|career|manager|analyst|officer|coordinator|director|specialist/i.test(text);\n          }).map(el => ({\n            tag: el.tagName,\n            text: (el.textContent || '').trim().substring(0, 150),\n            classes: el.className,\n            id: el.id\n          })).slice(0, 20)\n        };\n      });\n      \n      if (currentPage === 1) {\n        console.log('=== PAGE DEBUG INFO ===');\n        console.log('Title:', pageInfo.title);\n        console.log('URL:', pageInfo.url);\n        console.log('Body length:', pageInfo.bodyLength);\n        console.log('First chars:', pageInfo.firstChars);\n        console.log('Total links found:', pageInfo.allLinks.length);\n        console.log('Potential job elements:', pageInfo.potentialJobElements.length);\n      }\n\n      const pageJobData = await scrapeJobsFromCurrentPage(page);\n      console.log(`Page ${currentPage}: Found ${pageJobData.length} jobs`);\n      \n      const jobsWithPageInfo = pageJobData.map(job => ({\n        ...job,\n        pageNumber: currentPage,\n        pageUrl: page.url()\n      }));\n      \n      allJobs = allJobs.concat(jobsWithPageInfo);\n\n      const paginationInfo = await page.evaluate(() => {\n        const paginationData = {\n          hasNextPage: false,\n          nextPageElement: null,\n          paginationMethod: null,\n          totalPages: null,\n          currentPageInfo: null,\n          debugInfo: []\n        };\n\n        const nextButtons = Array.from(document.querySelectorAll('a, button')).filter(el => {\n          const text = (el.textContent || '').trim().toLowerCase();\n          const ariaLabel = (el.getAttribute('aria-label') || '').toLowerCase();\n          const title = (el.getAttribute('title') || '').toLowerCase();\n          \n          return text.includes('next') || text.includes('suivant') || \n                 text.includes('â€º') || text.includes('>>') ||\n                 ariaLabel.includes('next') || ariaLabel.includes('suivant') ||\n                 title.includes('next') || title.includes('suivant') ||\n                 el.classList.toString().toLowerCase().includes('next');\n        });\n        \n        paginationData.debugInfo.push(`Next buttons found: ${nextButtons.length}`);\n        \n        if (nextButtons.length > 0) {\n          const nextBtn = nextButtons[0];\n          if (!nextBtn.disabled && \n              !nextBtn.classList.contains('disabled') &&\n              !nextBtn.getAttribute('aria-disabled')) {\n            paginationData.hasNextPage = true;\n            paginationData.nextPageElement = {\n              tag: nextBtn.tagName,\n              text: nextBtn.textContent.trim(),\n              classes: nextBtn.className,\n              href: nextBtn.href,\n              onclick: nextBtn.onclick ? nextBtn.onclick.toString() : null\n            };\n            paginationData.paginationMethod = 'next-button';\n          }\n        }\n\n        if (!paginationData.hasNextPage) {\n          const pageNumbers = Array.from(document.querySelectorAll('a, button')).filter(el => {\n            const text = (el.textContent || '').trim();\n            return /^\\d+$/.test(text) && parseInt(text) > 1 && parseInt(text) <= 20;\n          }).sort((a, b) => {\n            const aNum = parseInt(a.textContent.trim());\n            const bNum = parseInt(b.textContent.trim());\n            return aNum - bNum;\n          });\n          \n          paginationData.debugInfo.push(`Page number links found: ${pageNumbers.length}`);\n          \n          if (pageNumbers.length > 0) {\n            const currentPageElements = Array.from(document.querySelectorAll('*')).filter(el => {\n              return el.classList.contains('current') || \n                     el.classList.contains('active') || \n                     el.classList.contains('selected') ||\n                     el.getAttribute('aria-current') === 'page';\n            });\n            \n            let currentPageNum = 1;\n            if (currentPageElements.length > 0) {\n              const currentText = currentPageElements[0].textContent.trim();\n              if (/^\\d+$/.test(currentText)) {\n                currentPageNum = parseInt(currentText);\n              }\n            }\n            \n            paginationData.currentPageInfo = currentPageNum;\n            paginationData.totalPages = Math.max(...pageNumbers.map(el => parseInt(el.textContent.trim())));\n            \n            const nextPageNum = currentPageNum + 1;\n            const nextPageLink = pageNumbers.find(el => parseInt(el.textContent.trim()) === nextPageNum);\n            \n            if (nextPageLink) {\n              paginationData.hasNextPage = true;\n              paginationData.nextPageElement = {\n                tag: nextPageLink.tagName,\n                text: nextPageLink.textContent.trim(),\n                classes: nextPageLink.className,\n                href: nextPageLink.href,\n                pageNumber: nextPageNum\n              };\n              paginationData.paginationMethod = 'page-numbers';\n            }\n          }\n        }\n\n        if (!paginationData.hasNextPage) {\n          const loadMoreButtons = Array.from(document.querySelectorAll('a, button')).filter(el => {\n            const text = (el.textContent || '').trim().toLowerCase();\n            return text.includes('load more') || text.includes('show more') || \n                   text.includes('voir plus') || text.includes('charger plus') ||\n                   text.includes('more results') || text.includes('plus de rÃ©sultats');\n          });\n          \n          paginationData.debugInfo.push(`Load more buttons found: ${loadMoreButtons.length}`);\n          \n          if (loadMoreButtons.length > 0) {\n            const loadMoreBtn = loadMoreButtons[0];\n            if (!loadMoreBtn.disabled && !loadMoreBtn.classList.contains('disabled')) {\n              paginationData.hasNextPage = true;\n              paginationData.nextPageElement = {\n                tag: loadMoreBtn.tagName,\n                text: loadMoreBtn.textContent.trim(),\n                classes: loadMoreBtn.className,\n                href: loadMoreBtn.href\n              };\n              paginationData.paginationMethod = 'load-more';\n            }\n          }\n        }\n\n        return paginationData;\n      });\n\n      console.log(`Pagination info for page ${currentPage}:`, {\n        hasNextPage: paginationInfo.hasNextPage,\n        method: paginationInfo.paginationMethod,\n        totalPages: paginationInfo.totalPages,\n        currentPage: paginationInfo.currentPageInfo\n      });\n\n      if (paginationInfo.totalPages) {\n        totalPagesFound = paginationInfo.totalPages;\n        maxPages = Math.min(totalPagesFound, 20);\n      }\n\n      if (!paginationInfo.hasNextPage) {\n        console.log(`No more pages found. Stopping at page ${currentPage}.`);\n        break;\n      }\n\n      try {\n        console.log(`Navigating to page ${currentPage + 1} using method: ${paginationInfo.paginationMethod}`);\n        \n        if (paginationInfo.paginationMethod === 'next-button' || \n            paginationInfo.paginationMethod === 'page-numbers') {\n          \n          const nextElement = paginationInfo.nextPageElement;\n          \n          if (nextElement.href && nextElement.href !== 'javascript:void(0)' && nextElement.href !== '#') {\n            await page.goto(nextElement.href, { waitUntil: 'networkidle2', timeout: 30000 });\n          } else {\n            const clicked = await page.evaluate((elementInfo) => {\n              const elements = Array.from(document.querySelectorAll('a, button')).filter(el => {\n                return el.textContent.trim() === elementInfo.text &&\n                       el.tagName === elementInfo.tag;\n              });\n              \n              if (elements.length > 0) {\n                elements[0].click();\n                return true;\n              }\n              return false;\n            }, nextElement);\n            \n            if (!clicked) {\n              console.log('Failed to click next page element');\n              break;\n            }\n            \n            await new Promise(resolve => setTimeout(resolve, 3000));\n          }\n          \n        } else if (paginationInfo.paginationMethod === 'load-more') {\n          const clicked = await page.evaluate((elementInfo) => {\n            const elements = Array.from(document.querySelectorAll('a, button')).filter(el => {\n              return el.textContent.trim().toLowerCase() === elementInfo.text.toLowerCase();\n            });\n            \n            if (elements.length > 0) {\n              elements[0].click();\n              return true;\n            }\n            return false;\n          }, paginationInfo.nextPageElement);\n          \n          if (!clicked) {\n            console.log('Failed to click load more button');\n            break;\n          }\n          \n          await new Promise(resolve => setTimeout(resolve, 5000));\n        }\n        \n      } catch (navigationError) {\n        console.error(`Error navigating to page ${currentPage + 1}:`, navigationError.message);\n        break;\n      }\n\n      currentPage++;\n      \n      if (currentPage > maxPages) {\n        console.log(`Reached maximum page limit (${maxPages}). Stopping.`);\n        break;\n      }\n    }\n\n    console.log(`\\n=== PAGINATION SUMMARY ===`);\n    console.log(`Total pages processed: ${currentPage - 1}`);\n    console.log(`Total jobs found across all pages: ${allJobs.length}`);\n    if (totalPagesFound) {\n      console.log(`Total pages detected on site: ${totalPagesFound}`);\n    }\n\n    const validJobs = [];\n    const seenTitles = new Set();\n    \n    for (const job of allJobs) {\n      if (!job || !job.title || job.title.length < 5) continue;\n      \n      const title = job.title.trim();\n      const titleKey = title.toLowerCase();\n      \n      if (seenTitles.has(titleKey)) continue;\n      seenTitles.add(titleKey);\n      \n      const skipPatterns = /^(home|about|contact|menu|navigation|header|footer|login|search|filter|sort|page|back|next|previous|more|less|show|hide|click|here|see|view|all|Â©|privacy|terms|conditions|policy|legal|help|support|faq)$/i;\n      if (skipPatterns.test(title)) continue;\n      \n      const jobPatterns = /manager|analyst|officer|specialist|coordinator|assistant|director|lead|senior|junior|intern|consultant|advisor|expert|technician|administrator|developer|engineer|chef|responsable|chargÃ©|analyste|gestionnaire|directeur|stage|stagiaire/i;\n      if (!jobPatterns.test(title) && title.length < 20) continue;\n      \n      validJobs.push({\n        ...job,\n        scrapedAt: new Date().toISOString()\n      });\n    }\n\n    console.log(`Filtered to ${validJobs.length} unique valid jobs`);\n    \n    return {\n      jobs: validJobs,\n      paginationInfo: {\n        totalPagesProcessed: currentPage - 1,\n        totalPagesDetected: totalPagesFound,\n        totalJobsFound: allJobs.length,\n        validJobsAfterFiltering: validJobs.length\n      }\n    };\n\n  } catch (error) {\n    console.error('Error in scrapeAFDJobsWithPagination:', error);\n    throw error;\n  } finally {\n    if (browser) {\n      await browser.close();\n    }\n  }\n}\n\n// Function to scrape jobs from the current page - WITH DEADLINE & LOCATION EXTRACTION\nasync function scrapeJobsFromCurrentPage(page) {\n  return await page.evaluate(() => {\n    const results = [];\n    \n    // Extract deadline using the provided CSS selector\n    function extractDeadline(parentElement) {\n      if (!parentElement) return 'N/A';\n      \n      const deadlineElement = parentElement.querySelector('p.p-text.p-f-sz-xs.p-t-muted.p-f-w-n.p-t-wr-fw');\n      if (deadlineElement) {\n        return deadlineElement.textContent.trim();\n      }\n      \n      const allParagraphs = parentElement.querySelectorAll('p');\n      for (const p of allParagraphs) {\n        const text = p.textContent.trim();\n        if (/deadline|date limite|closing date|expire|fermeture|avant le|until|jusqu'au/i.test(text)) {\n          return text;\n        }\n        if (/\\d{1,2}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{2,4}|\\d{4}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{1,2}|[A-Z][a-z]+ \\d{1,2},? \\d{4}/i.test(text)) {\n          return text;\n        }\n      }\n      \n      return 'N/A';\n    }\n    \n    // Extract location using the provided CSS selector\n    function extractLocation(parentElement) {\n      if (!parentElement) return 'N/A';\n      \n      const locationElement = parentElement.querySelector('p.p-text.p-f-sz-sm.p-t-default.p-f-w-n');\n      if (locationElement) {\n        return locationElement.textContent.trim();\n      }\n      \n      return 'N/A';\n    }\n    \n    // Strategy 1: Look for job-specific links with deadline and location\n    const jobLinks = Array.from(document.querySelectorAll('a')).filter(a => {\n      const text = (a.textContent || '').trim();\n      const href = a.href || '';\n      return text.length > 5 && (\n        /job|position|poste|emploi|career|opportunity|ouverture/i.test(text) ||\n        /job|position|career|apply/i.test(href)\n      );\n    });\n    \n    for (let i = 0; i < jobLinks.length; i++) {\n      const link = jobLinks[i];\n      const text = (link.textContent || '').trim();\n      \n      if (text.length < 5 || text.length > 200) continue;\n      \n      let parentContainer = link.closest('div[class*=\"job\"]') || \n                           link.closest('div[class*=\"position\"]') ||\n                           link.closest('div[class*=\"card\"]') ||\n                           link.closest('li') ||\n                           link.parentElement;\n      \n      results.push({\n        strategy: 'job-links',\n        index: results.length + 1,\n        title: text,\n        link: link.href,\n        location: extractLocation(parentContainer),\n        department: 'N/A',\n        datePosted: 'N/A',\n        deadline: extractDeadline(parentContainer),\n        fullText: text,\n        elementInfo: {\n          tag: link.tagName,\n          classes: link.className,\n          id: link.id\n        }\n      });\n    }\n    \n    // Strategy 2: Look for table rows with deadline and location\n    const tableRows = Array.from(document.querySelectorAll('tr')).filter(tr => {\n      const text = (tr.textContent || '').trim();\n      return text.length > 10 && text.length < 500 &&\n             /[A-Za-z].*[A-Za-z]/.test(text) &&\n             !(/^(title|position|location|department|date|posted|job|career|deadline)$/i.test(text));\n    });\n    \n    for (let i = 0; i < tableRows.length && i < 50; i++) {\n      const row = tableRows[i];\n      const text = (row.textContent || '').trim();\n      const cells = Array.from(row.querySelectorAll('td, th')).map(cell => \n        (cell.textContent || '').trim()\n      ).filter(cellText => cellText.length > 0);\n      \n      if (cells.length === 0) continue;\n      \n      const title = cells[0] || text.split('\\n')[0] || 'N/A';\n      const location = extractLocation(row) !== 'N/A' ? extractLocation(row) : (cells[1] || 'N/A');\n      const department = cells[2] || 'N/A';\n      \n      const rowLink = row.querySelector('a');\n      const link = rowLink ? rowLink.href : 'N/A';\n      \n      let deadline = 'N/A';\n      for (const cell of cells) {\n        if (/\\d{1,2}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{2,4}|\\d{4}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{1,2}/i.test(cell)) {\n          deadline = cell;\n          break;\n        }\n      }\n      if (deadline === 'N/A') {\n        deadline = extractDeadline(row);\n      }\n      \n      results.push({\n        strategy: 'table-rows',\n        index: results.length + 1,\n        title: title,\n        location: location,\n        department: department,\n        datePosted: 'N/A',\n        deadline: deadline,\n        link: link,\n        fullText: text.substring(0, 300),\n        elementInfo: {\n          tag: row.tagName,\n          classes: row.className,\n          cellCount: cells.length\n        }\n      });\n    }\n    \n    // Strategy 3: Look for divs or list items with job-like content and deadline/location\n    const contentElements = Array.from(document.querySelectorAll('div, li')).filter(el => {\n      const text = (el.textContent || '').trim();\n      return text.length > 15 && text.length < 300 &&\n             /manager|analyst|officer|specialist|coordinator|assistant|director|lead|senior|consultant|advisor|expert|technician|developer|engineer|chef|responsable|chargÃ©|analyste|gestionnaire|directeur/i.test(text);\n    });\n    \n    for (let i = 0; i < contentElements.length && i < 30; i++) {\n      const el = contentElements[i];\n      const text = (el.textContent || '').trim();\n      \n      const hasChildJobElements = Array.from(el.querySelectorAll('*')).some(child => {\n        const childText = (child.textContent || '').trim();\n        return childText.length > 15 && childText !== text &&\n               /manager|analyst|officer|specialist|coordinator|assistant|director|lead|senior/i.test(childText);\n      });\n      \n      if (hasChildJobElements) continue;\n      \n      if (el.classList.contains('p-panel') || el.classList.contains('p-p-b-md')) {\n        const directLinks = Array.from(el.children).filter(child => child.tagName === 'A');\n        if (directLinks.length === 0) continue;\n      }\n      \n      const lines = text.split('\\n').filter(line => line.trim().length > 0);\n      const title = lines[0] || text.substring(0, 100);\n      \n      const elLink = el.querySelector('a') || (el.tagName === 'A' ? el : null);\n      const link = elLink ? elLink.href : 'N/A';\n      \n      if (!link || link === 'N/A') continue;\n      \n      results.push({\n        strategy: 'content-elements',\n        index: results.length + 1,\n        title: title,\n        location: extractLocation(el),\n        department: 'N/A',\n        datePosted: 'N/A',\n        deadline: extractDeadline(el),\n        link: link,\n        fullText: text.substring(0, 300),\n        elementInfo: {\n          tag: el.tagName,\n          classes: el.className,\n          id: el.id\n        }\n      });\n    }\n    \n    return results;\n  });\n}\n\n// Main execution for n8n\ntry {\n  console.log('Starting AFD job scraping with pagination and deadline/location extraction...');\n  const result = await scrapeAFDJobsWithPagination();\n  const jobs = result.jobs;\n  const paginationInfo = result.paginationInfo;\n  \n  console.log(`Scraping completed. Found ${jobs.length} jobs across ${paginationInfo.totalPagesProcessed} pages.`);\n  \n  if (jobs.length === 0) {\n    return [{\n      json: {\n        message: 'No jobs found across all pages',\n        jobsFound: 0,\n        scrapedAt: new Date().toISOString(),\n        source: 'AFD Careers',\n        paginationInfo: paginationInfo,\n        recommendations: [\n          'Check if the site structure has changed',\n          'Verify the initial URL is still valid',\n          'The site may require user interaction to load jobs',\n          'Jobs may be loaded via AJAX/JavaScript after page interactions'\n        ]\n      }\n    }];\n  }\n  \n  const n8nResults = jobs.map(job => ({\n    json: {\n      jobTitle: job.title,\n      location: job.location,\n      department: job.department,\n      datePosted: job.datePosted,\n      deadline: job.deadline,\n      jobLink: job.link,\n      strategy: job.strategy,\n      pageNumber: job.pageNumber,\n      pageUrl: job.pageUrl,\n      fullText: job.fullText,\n      scrapedAt: job.scrapedAt,\n      source: 'AFD Careers',\n      elementInfo: job.elementInfo,\n      hasValidTitle: job.title && job.title !== 'N/A' && job.title.length > 5,\n      hasLocation: job.location && job.location !== 'N/A',\n      hasLink: job.link && job.link !== 'N/A' && job.link.startsWith('http'),\n      hasDeadline: job.deadline && job.deadline !== 'N/A'\n    }\n  }));\n  \n  console.log(`Returning ${n8nResults.length} job results to n8n...`);\n  console.log(`Pagination info: ${paginationInfo.totalPagesProcessed} pages processed, ${paginationInfo.validJobsAfterFiltering} valid jobs`);\n  return n8nResults;\n  \n} catch (error) {\n  console.error('Main execution error:', error);\n  \n  return [{\n    json: {\n      error: true,\n      errorMessage: error.message,\n      errorType: error.name,\n      scrapedAt: new Date().toISOString(),\n      source: 'AFD Careers',\n      jobsFound: 0\n    }\n  }];\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1080,
        700
      ],
      "id": "e0771964-a767-40b1-850c-f94f7375c3fa",
      "name": "AFD ( bedda sheghel )"
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1OxvyonxGoqtOP9mor40GiAt_5hShKofV1lyIMMnWTKg/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1OxvyonxGoqtOP9mor40GiAt_5hShKofV1lyIMMnWTKg/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Url": "={{ $('Loop Over Items8').item.json.link }}",
            "Job Title": "={{ $('Loop Over Items8').item.json.title }}",
            "Location": "={{ $('Loop Over Items8').item.json.location }}",
            "Deadline": "={{ $('Loop Over Items8').item.json.deadline }}"
          },
          "matchingColumns": [
            "Url"
          ],
          "schema": [
            {
              "id": "Job Title",
              "displayName": "Job Title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Location",
              "displayName": "Location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Deadline",
              "displayName": "Deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Url",
              "displayName": "Url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        20,
        1040
      ],
      "id": "f455a0b4-ad80-49b8-a023-2f26125ec993",
      "name": "GIZ1",
      "credentials": {
        "googleApi": {
          "id": "ya8X2hxWaEd62OeF",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1ofM2RfFkDQ_EespI86YCVWhMNfUVM9o7aPafje3dK74/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1vgTcibuZxP178tgABFISXasKdawpl9Q9hxwtd3aemr0/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Location": "={{ $('Loop Over Items10').item.json.location }}",
            "Deadline": "={{ $('Loop Over Items10').item.json.deadline }}",
            "Job URL": "={{ $('Loop Over Items10').item.json.jobLink }}",
            "Job Title": "={{ $('Loop Over Items10').item.json.jobTitle }}"
          },
          "matchingColumns": [
            "Job URL"
          ],
          "schema": [
            {
              "id": "Job Title",
              "displayName": "Job Title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Job URL",
              "displayName": "Job URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Deadline",
              "displayName": "Deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Location",
              "displayName": "Location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        20,
        720
      ],
      "id": "9c3f38a5-ea88-4b2b-a5d2-a4e16c8effb8",
      "name": "AFD",
      "credentials": {
        "googleApi": {
          "id": "ya8X2hxWaEd62OeF",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1G21gu8XxUVvR2b_qld1YQDACfidKOZwAuA7Vyy7ZpnU/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1vgTcibuZxP178tgABFISXasKdawpl9Q9hxwtd3aemr0/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Link": "={{ $('Loop Over Items9').item.json.Link }}",
            "Title": "={{ $('Loop Over Items9').item.json.Title }}",
            "Location": "={{ $('Loop Over Items9').item.json.Location }}",
            "Deadline": "={{ $('Loop Over Items9').item.json.Deadline }}"
          },
          "matchingColumns": [
            "Link"
          ],
          "schema": [
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Link",
              "displayName": "Link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Location",
              "displayName": "Location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Deadline",
              "displayName": "Deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        260,
        380
      ],
      "id": "99e9257a-7175-4fcb-994f-236db7cf04a9",
      "name": "EU Europa",
      "credentials": {
        "googleApi": {
          "id": "ya8X2hxWaEd62OeF",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1vgTcibuZxP178tgABFISXasKdawpl9Q9hxwtd3aemr0/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1vgTcibuZxP178tgABFISXasKdawpl9Q9hxwtd3aemr0/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Job Title": "={{ $('Loop Over Items1').item.json.title }}",
            "Job URL": "={{ $('Loop Over Items1').item.json.link }}",
            "Deadline": "={{ $('Information Extractor2').item.json.output.Deadline }}",
            "Location": "={{ $('Loop Over Items1').item.json.location }}"
          },
          "matchingColumns": [
            "Job URL"
          ],
          "schema": [
            {
              "id": "Job Title",
              "displayName": "Job Title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Job URL",
              "displayName": "Job URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Location",
              "displayName": "Location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Deadline",
              "displayName": "Deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        880,
        1480
      ],
      "id": "d785d9e7-10b1-4150-b114-7ed51547b26c",
      "name": "World Bank",
      "credentials": {
        "googleApi": {
          "id": "ya8X2hxWaEd62OeF",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1s1QxIeOb61Ae-2UmFs0xwQZbywyvr63AZLZ9PjWOmjg/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1s1QxIeOb61Ae-2UmFs0xwQZbywyvr63AZLZ9PjWOmjg/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Reference": "={{ $('Loop Over Items6').item.json.reference }}",
            "Job Title": "={{ $('Loop Over Items6').item.json.title }}",
            "Location": "={{ $('Loop Over Items6').item.json.location }}",
            "Deadline": "={{ $('Loop Over Items6').item.json.deadline }}",
            "URL": "={{ $('Loop Over Items6').item.json.detailUrl }}"
          },
          "matchingColumns": [
            "Reference"
          ],
          "schema": [
            {
              "id": "Job Title",
              "displayName": "Job Title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Location",
              "displayName": "Location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Deadline",
              "displayName": "Deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "URL",
              "displayName": "URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Published Date",
              "displayName": "Published Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Organization",
              "displayName": "Organization",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Reference",
              "displayName": "Reference",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        160,
        1780
      ],
      "id": "a8c3bcd2-1f8e-4869-9402-9326dbd748c1",
      "name": "UNGM2",
      "credentials": {
        "googleApi": {
          "id": "ya8X2hxWaEd62OeF",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/15b5MDVCL98sT20BxHEl7jBYZGJk_yd2sKobwE-v_azA/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1vgTcibuZxP178tgABFISXasKdawpl9Q9hxwtd3aemr0/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Location": "={{ $json.output[\"Job location\"] }}",
            "Deadline": "={{ $('OpenAI').item.json.message.content }}",
            "Title": "={{ $('Loop Over Items7').item.json.JobTitle }}",
            "Link": "={{ $('Loop Over Items7').item.json.JobURL }}"
          },
          "matchingColumns": [
            "Link"
          ],
          "schema": [
            {
              "id": "Title",
              "displayName": "Title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Deadline",
              "displayName": "Deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Location",
              "displayName": "Location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Link",
              "displayName": "Link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        1220,
        2120
      ],
      "id": "c1406fde-ea10-405e-93a5-5be081c61abc",
      "name": "UNDP1",
      "credentials": {
        "googleApi": {
          "id": "ya8X2hxWaEd62OeF",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1vSuVG4oxFKKEQbu-sQ4souZWQckGPSPpx9bgkoIhIQE/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1vgTcibuZxP178tgABFISXasKdawpl9Q9hxwtd3aemr0/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Job Title": "={{ $('Loop Over Items3').item.json.JobTitle }}",
            "Job URL": "={{ $('Loop Over Items3').item.json.JobURL }}",
            "Location": "={{ $('Loop Over Items3').item.json.Country }}",
            "Deadline": "={{ $('Loop Over Items3').item.json.Deadline }}"
          },
          "matchingColumns": [
            "Job URL"
          ],
          "schema": [
            {
              "id": "Job Title",
              "displayName": "Job Title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Job URL",
              "displayName": "Job URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Deadline",
              "displayName": "Deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Location",
              "displayName": "Location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        -60,
        3380
      ],
      "id": "d2b1283f-92a9-40f2-834f-198a7a674957",
      "name": "France Expertise",
      "credentials": {
        "googleApi": {
          "id": "ya8X2hxWaEd62OeF",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1_YKQki1MNMOOHjPUjJgIM8DRiKBQNiyDZHb1zp9KtDc/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1vgTcibuZxP178tgABFISXasKdawpl9Q9hxwtd3aemr0/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Deadline": "={{ $('Information Extractor').item.json.output.Deadline }}",
            "Job title": "={{ $('Information Extractor').item.json.output.Title }}",
            "URL": "={{ $('Information Extractor').item.json.output.Link }}",
            "Location": "={{ $('Loop Over Items11').item.json.Location }}"
          },
          "matchingColumns": [
            "URL"
          ],
          "schema": [
            {
              "id": "Job title",
              "displayName": "Job title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "URL",
              "displayName": "URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Location",
              "displayName": "Location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Deadline",
              "displayName": "Deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        1340,
        100
      ],
      "id": "67488f75-b44c-4b4b-ae3c-451d6ee50e8c",
      "name": "ADB",
      "credentials": {
        "googleApi": {
          "id": "ya8X2hxWaEd62OeF",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1vSuVG4oxFKKEQbu-sQ4souZWQckGPSPpx9bgkoIhIQE/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1vSuVG4oxFKKEQbu-sQ4souZWQckGPSPpx9bgkoIhIQE/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Job Title": "={{ $('Loop Over Items5').item.json.JobTitle }}",
            "Job URL": "={{ $('Loop Over Items5').item.json.JobURL }}",
            "Deadline": "={{ $('Loop Over Items5').item.json.Deadline }}",
            "Location": "={{ $('Loop Over Items5').item.json.Country }}"
          },
          "matchingColumns": [
            "Job URL"
          ],
          "schema": [
            {
              "id": "Job Title",
              "displayName": "Job Title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Job URL",
              "displayName": "Job URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Deadline",
              "displayName": "Deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Location",
              "displayName": "Location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        80,
        3960
      ],
      "id": "9f329d66-26df-46aa-8ecc-c0866b58810d",
      "name": "France Expertise1",
      "credentials": {
        "googleApi": {
          "id": "ya8X2hxWaEd62OeF",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1vSuVG4oxFKKEQbu-sQ4souZWQckGPSPpx9bgkoIhIQE/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1vSuVG4oxFKKEQbu-sQ4souZWQckGPSPpx9bgkoIhIQE/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Job Title": "={{ $('Loop Over Items').item.json.JobTitle }}",
            "Job URL": "={{ $('Loop Over Items').item.json.JobURL }}",
            "Deadline": "={{ $('Loop Over Items').item.json.Deadline }}",
            "Location": "={{ $('Loop Over Items').item.json.Country }}"
          },
          "matchingColumns": [
            "Job URL"
          ],
          "schema": [
            {
              "id": "Job Title",
              "displayName": "Job Title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Job URL",
              "displayName": "Job URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Deadline",
              "displayName": "Deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Location",
              "displayName": "Location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        -60,
        3800
      ],
      "id": "f38db4f7-64dd-4d63-aef7-9df51a7f6ede",
      "name": "France Expertise2",
      "credentials": {
        "googleApi": {
          "id": "ya8X2hxWaEd62OeF",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1vSuVG4oxFKKEQbu-sQ4souZWQckGPSPpx9bgkoIhIQE/edit?gid=0#gid=0",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1vSuVG4oxFKKEQbu-sQ4souZWQckGPSPpx9bgkoIhIQE/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Job Title": "={{ $('Loop Over Items4').item.json.JobTitle }}",
            "Job URL": "={{ $('Loop Over Items4').item.json.JobURL }}",
            "Location": "={{ $('Loop Over Items4').item.json.Country }}",
            "Deadline": "={{ $('Loop Over Items4').item.json.Deadline }}"
          },
          "matchingColumns": [
            "Job URL"
          ],
          "schema": [
            {
              "id": "Job Title",
              "displayName": "Job Title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Job URL",
              "displayName": "Job URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Deadline",
              "displayName": "Deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Location",
              "displayName": "Location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        160,
        2540
      ],
      "id": "897d4d85-dfb5-4903-9c5f-d77c516a39a5",
      "name": "France Expertise3",
      "credentials": {
        "googleApi": {
          "id": "ya8X2hxWaEd62OeF",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "975df472-8058-4b1b-a93d-8c2957408279",
              "leftValue": "={{ $json.Domain }}",
              "rightValue": "Information Technology",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -880,
        380
      ],
      "id": "846eb4e7-1acf-4676-a92e-b4146b640965",
      "name": "If11"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        1000,
        2120
      ],
      "id": "dafa51dc-72a2-427b-80a5-0741a8b9a15f",
      "name": "Wait",
      "webhookId": "dac1ef33-977a-47aa-bc9e-f0e9796f7256"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -60,
        1840
      ],
      "id": "11b1ce64-0ef5-4bb3-85e4-d866b9bd7ad0",
      "name": "Wait1",
      "webhookId": "dac1ef33-977a-47aa-bc9e-f0e9796f7256"
    },
    {
      "parameters": {
        "operation": "upsert",
        "schema": {
          "__rl": true,
          "value": "jobs",
          "mode": "list",
          "cachedResultName": "jobs"
        },
        "table": {
          "__rl": true,
          "value": "afd",
          "mode": "list",
          "cachedResultName": "afd"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "job_url": "={{ $json[\"Job URL\"] }}",
            "job_title": "={{ $json[\"Job Title\"] }}",
            "location": "={{ $json.Location }}",
            "deadline": "={{ $json.Deadline }}"
          },
          "matchingColumns": [
            "job_url"
          ],
          "schema": [
            {
              "id": "job_title",
              "displayName": "job_title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "job_url",
              "displayName": "job_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "location",
              "displayName": "location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "deadline",
              "displayName": "deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        240,
        700
      ],
      "id": "81bdb1d4-a435-4c6d-a4f0-1315be9d8cdb",
      "name": "Postgres( AFD )",
      "credentials": {
        "postgres": {
          "id": "hzKdiI9CS5AlLHQw",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "upsert",
        "schema": {
          "__rl": true,
          "value": "jobs",
          "mode": "list",
          "cachedResultName": "jobs"
        },
        "table": {
          "__rl": true,
          "value": "worldbank",
          "mode": "list",
          "cachedResultName": "worldbank"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "job_url": "={{ $('Loop Over Items1').item.json.link }}",
            "job_title": "={{ $('Loop Over Items1').item.json.title }}",
            "location": "={{ $('Loop Over Items1').item.json.location }}",
            "deadline": "={{ $('Information Extractor2').item.json.output.Deadline }}"
          },
          "matchingColumns": [
            "job_url"
          ],
          "schema": [
            {
              "id": "job_title",
              "displayName": "job_title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "location",
              "displayName": "location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "deadline",
              "displayName": "deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "job_url",
              "displayName": "job_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        1220,
        1500
      ],
      "id": "43293faf-9d91-4686-b7d6-da93f2d50434",
      "name": "Postgres( World Bank )",
      "credentials": {
        "postgres": {
          "id": "hzKdiI9CS5AlLHQw",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "upsert",
        "schema": {
          "__rl": true,
          "value": "jobs",
          "mode": "list",
          "cachedResultName": "jobs"
        },
        "table": {
          "__rl": true,
          "value": "giz",
          "mode": "list",
          "cachedResultName": "giz"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "job_url": "={{ $('Loop Over Items8').item.json.link }}",
            "job_title": "={{ $('Loop Over Items8').item.json.title }}",
            "location": "={{ $('Loop Over Items8').item.json.location }}",
            "deadline": "={{ $('Loop Over Items8').item.json.deadline }}"
          },
          "matchingColumns": [
            "job_url"
          ],
          "schema": [
            {
              "id": "job_title",
              "displayName": "job_title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "location",
              "displayName": "location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "deadline",
              "displayName": "deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "job_url",
              "displayName": "job_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        300,
        1060
      ],
      "id": "37d0f9d3-86de-422e-86b6-e1a4af191892",
      "name": "Postgres( GIZ )",
      "credentials": {
        "postgres": {
          "id": "hzKdiI9CS5AlLHQw",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "upsert",
        "schema": {
          "__rl": true,
          "value": "jobs",
          "mode": "list",
          "cachedResultName": "jobs"
        },
        "table": {
          "__rl": true,
          "value": "ungm",
          "mode": "list",
          "cachedResultName": "ungm"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "job_title": "={{ $('Loop Over Items6').item.json.title }}",
            "job_url": "={{ $('Loop Over Items6').item.json.detailUrl }}",
            "location": "={{ $('Loop Over Items6').item.json.location }}",
            "deadline": "={{ $('Loop Over Items6').item.json.deadline }}",
            "reference": "={{ $('Loop Over Items6').item.json.reference }}"
          },
          "matchingColumns": [
            "reference"
          ],
          "schema": [
            {
              "id": "job_title",
              "displayName": "job_title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "job_url",
              "displayName": "job_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "location",
              "displayName": "location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "deadline",
              "displayName": "deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "reference",
              "displayName": "reference",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        380,
        1860
      ],
      "id": "ca43d6c1-226f-4cad-96a0-7a4e0c9db7f7",
      "name": "Postgres( UNGM )",
      "credentials": {
        "postgres": {
          "id": "hzKdiI9CS5AlLHQw",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "upsert",
        "schema": {
          "__rl": true,
          "value": "jobs",
          "mode": "list",
          "cachedResultName": "jobs"
        },
        "table": {
          "__rl": true,
          "value": "undp",
          "mode": "list",
          "cachedResultName": "undp"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "job_title": "={{ $('Loop Over Items7').item.json.JobTitle }}",
            "location": "={{ $('Information Extractor1').item.json.output[\"Job location\"] }}",
            "deadline": "={{ $('OpenAI').item.json.message.content }}",
            "job_url": "={{ $('Loop Over Items7').item.json.JobURL }}"
          },
          "matchingColumns": [
            "job_url"
          ],
          "schema": [
            {
              "id": "job_title",
              "displayName": "job_title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "location",
              "displayName": "location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "deadline",
              "displayName": "deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "job_url",
              "displayName": "job_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        1500,
        2120
      ],
      "id": "3deb4289-29d8-4ffb-a0f1-7262c143f33b",
      "name": "Postgres( UNPD )1",
      "credentials": {
        "postgres": {
          "id": "hzKdiI9CS5AlLHQw",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// CODE NODE: Brussels Time Conversion\nfunction convertFromBeirut(dateString, targetTimezone) {\n  // Parse the input as Beirut time\n  const date = new Date(dateString);\n  \n  // Convert to target timezone and format\n  const options = {\n    timeZone: targetTimezone,\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit',\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit',\n    hour12: false\n  };\n  \n  const formatter = new Intl.DateTimeFormat('en-GB', options);\n  const parts = formatter.formatToParts(date);\n  \n  const year = parts.find(p => p.type === 'year').value;\n  const month = parts.find(p => p.type === 'month').value;\n  const day = parts.find(p => p.type === 'day').value;\n  const hours = parts.find(p => p.type === 'hour').value;\n  const minutes = parts.find(p => p.type === 'minute').value;\n  const seconds = parts.find(p => p.type === 'second').value;\n  \n  return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n}\n\nreturn [{\n  organization: \"Brussels\",\n  utcOffset: \"UTC +1 (CET) / UTC +2 (CEST)\",\n  convertedTime: convertFromBeirut($now, 'Europe/Brussels')\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -420,
        360
      ],
      "id": "63cc50e5-83df-4dd6-8f59-08ba7bf541fe",
      "name": "Code1"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -40,
        220
      ],
      "id": "5257532b-a6d8-4eeb-978f-7c7414669f39",
      "name": "Wait2",
      "webhookId": "dac1ef33-977a-47aa-bc9e-f0e9796f7256"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -200,
        700
      ],
      "id": "30d95277-8628-4117-aa02-ffee4f271cbe",
      "name": "Wait3",
      "webhookId": "dac1ef33-977a-47aa-bc9e-f0e9796f7256"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -200,
        1040
      ],
      "id": "d7314ede-d31b-4c30-a454-e3c43bd49260",
      "name": "Wait4",
      "webhookId": "dac1ef33-977a-47aa-bc9e-f0e9796f7256"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        600,
        1480
      ],
      "id": "79b93f94-9c05-4786-a033-6252f3b43de3",
      "name": "Wait5",
      "webhookId": "dac1ef33-977a-47aa-bc9e-f0e9796f7256"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -280,
        3380
      ],
      "id": "d3339d4c-4b3f-4434-a3b5-784df652c0bb",
      "name": "Wait6",
      "webhookId": "dac1ef33-977a-47aa-bc9e-f0e9796f7256"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -280,
        3800
      ],
      "id": "e3b3cde9-87ab-4f53-8f92-696e0ecfb4a9",
      "name": "Wait7",
      "webhookId": "dac1ef33-977a-47aa-bc9e-f0e9796f7256"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -60,
        2540
      ],
      "id": "fa8ddbe6-591c-4f1f-be82-db612703a31b",
      "name": "Wait8",
      "webhookId": "dac1ef33-977a-47aa-bc9e-f0e9796f7256"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        1120,
        100
      ],
      "id": "e2cdb345-2fb1-45bf-8a6b-5d3cc45473fb",
      "name": "Wait9",
      "webhookId": "dac1ef33-977a-47aa-bc9e-f0e9796f7256"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -100,
        2880
      ],
      "id": "f44d71a8-8b6d-4245-86b9-40e2b7a04b1c",
      "name": "Wait10",
      "webhookId": "dac1ef33-977a-47aa-bc9e-f0e9796f7256"
    },
    {
      "parameters": {
        "jsCode": "// CODE NODE 7: GIZ (UTC +1 / +2 DST)\nfunction formatDate(date) {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const day = String(date.getDate()).padStart(2, '0');\n  const hours = String(date.getHours()).padStart(2, '0');\n  const minutes = String(date.getMinutes()).padStart(2, '0');\n  const seconds = String(date.getSeconds()).padStart(2, '0');\n  return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n}\n\nfunction convertFromBeirut(dateString) {\n  // Parse the Beirut time\n  const beirutDate = new Date(dateString);\n  \n  // Convert to Germany time zone\n  const germanyDateString = beirutDate.toLocaleString('en-US', { \n    timeZone: 'Europe/Berlin',\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit',\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit',\n    hour12: false\n  });\n  \n  // Parse the formatted string back to a Date object in Germany time\n  const germanyDate = new Date(germanyDateString);\n  \n  return formatDate(germanyDate);\n}\n\nreturn [{\n  organization: \"GIZ\",\n  utcOffset: \"UTC +1 (Germany Time) / UTC +2 (Daylight Saving)\",\n  convertedTime: convertFromBeirut($now)\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -660,
        720
      ],
      "id": "43f77462-f598-4492-a6b5-4d8dbf8a6771",
      "name": "Code2"
    },
    {
      "parameters": {
        "jsCode": "// CODE NODE 7: GIZ (UTC +1 / +2 DST)\nfunction formatDate(date) {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const day = String(date.getDate()).padStart(2, '0');\n  const hours = String(date.getHours()).padStart(2, '0');\n  const minutes = String(date.getMinutes()).padStart(2, '0');\n  const seconds = String(date.getSeconds()).padStart(2, '0');\n  return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n}\n\nfunction convertFromBeirut(dateString) {\n  // Parse the Beirut time\n  const beirutDate = new Date(dateString);\n  \n  // Convert to Germany time zone\n  const germanyDateString = beirutDate.toLocaleString('en-US', { \n    timeZone: 'Europe/Berlin',\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit',\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit',\n    hour12: false\n  });\n  \n  // Parse the formatted string back to a Date object in Germany time\n  const germanyDate = new Date(germanyDateString);\n  \n  return formatDate(germanyDate);\n}\n\nreturn [{\n  organization: \"GIZ\",\n  utcOffset: \"UTC +1 (Germany Time) / UTC +2 (Daylight Saving)\",\n  convertedTime: convertFromBeirut($now)\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -620,
        1060
      ],
      "id": "eabc9196-feae-447c-ac26-c55d55590176",
      "name": "Code3"
    },
    {
      "parameters": {
        "jsCode": "// CODE NODE 3: World Bank Group (UTC +0)\nfunction formatDate(date) {\n  const year = date.getUTCFullYear();\n  const month = String(date.getUTCMonth() + 1).padStart(2, '0');\n  const day = String(date.getUTCDate()).padStart(2, '0');\n  const hours = String(date.getUTCHours()).padStart(2, '0');\n  const minutes = String(date.getUTCMinutes()).padStart(2, '0');\n  const seconds = String(date.getUTCSeconds()).padStart(2, '0');\n  return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n}\n\nfunction convertFromBeirut(dateString, utcOffset) {\n  const date = new Date(dateString);\n  const utcDate = new Date(date.toLocaleString('en-US', { timeZone: 'UTC' }));\n  const beirutDate = new Date(date.toLocaleString('en-US', { timeZone: 'Asia/Beirut' }));\n  const beirutOffset = utcDate.getTime() - beirutDate.getTime();\n  const utcTime = date.getTime() + beirutOffset;\n  const targetTime = utcTime + (utcOffset * 60 * 60 * 1000);\n  return formatDate(new Date(targetTime));\n}\n\nreturn [{\n  organization: \"World Bank Group\",\n  utcOffset: \"UTC +0\",\n  convertedTime: convertFromBeirut($now, 0)\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -580,
        1780
      ],
      "id": "27f46302-7be7-4559-b2cb-dc2538229885",
      "name": "Code4"
    },
    {
      "parameters": {
        "jsCode": "// CODE NODE 5: Expertise France (UTC +1 / +2 DST)\nfunction formatDate(date) {\n  const year = date.getUTCFullYear();\n  const month = String(date.getUTCMonth() + 1).padStart(2, '0');\n  const day = String(date.getUTCDate()).padStart(2, '0');\n  const hours = String(date.getUTCHours()).padStart(2, '0');\n  const minutes = String(date.getUTCMinutes()).padStart(2, '0');\n  const seconds = String(date.getUTCSeconds()).padStart(2, '0');\n  return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n}\n\nfunction convertFromBeirut(dateString, utcOffset) {\n  const date = new Date(dateString);\n  const utcDate = new Date(date.toLocaleString('en-US', { timeZone: 'UTC' }));\n  const beirutDate = new Date(date.toLocaleString('en-US', { timeZone: 'Asia/Beirut' }));\n  const beirutOffset = utcDate.getTime() - beirutDate.getTime();\n  const utcTime = date.getTime() + beirutOffset;\n  const targetTime = utcTime + (utcOffset * 60 * 60 * 1000);\n  return formatDate(new Date(targetTime));\n}\n\nreturn [{\n  organization: \"Expertise France\",\n  utcOffset: \"UTC +1 (Standard) / UTC +2 (Daylight Saving)\",\n  convertedTime: convertFromBeirut($now, 1)\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -720,
        3320
      ],
      "id": "c4215bec-0098-4e35-8f38-27ec8ea9efc1",
      "name": "Code5"
    },
    {
      "parameters": {
        "jsCode": "// CODE NODE 5: Expertise France (UTC +1 / +2 DST)\nfunction formatDate(date) {\n  const year = date.getUTCFullYear();\n  const month = String(date.getUTCMonth() + 1).padStart(2, '0');\n  const day = String(date.getUTCDate()).padStart(2, '0');\n  const hours = String(date.getUTCHours()).padStart(2, '0');\n  const minutes = String(date.getUTCMinutes()).padStart(2, '0');\n  const seconds = String(date.getUTCSeconds()).padStart(2, '0');\n  return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n}\n\nfunction convertFromBeirut(dateString, utcOffset) {\n  const date = new Date(dateString);\n  const utcDate = new Date(date.toLocaleString('en-US', { timeZone: 'UTC' }));\n  const beirutDate = new Date(date.toLocaleString('en-US', { timeZone: 'Asia/Beirut' }));\n  const beirutOffset = utcDate.getTime() - beirutDate.getTime();\n  const utcTime = date.getTime() + beirutOffset;\n  const targetTime = utcTime + (utcOffset * 60 * 60 * 1000);\n  return formatDate(new Date(targetTime));\n}\n\nreturn [{\n  organization: \"Expertise France\",\n  utcOffset: \"UTC +1 (Standard) / UTC +2 (Daylight Saving)\",\n  convertedTime: convertFromBeirut($now, 1)\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -720,
        3720
      ],
      "id": "8b94c142-8fa0-4523-9f26-2b6514a248a6",
      "name": "Code6"
    },
    {
      "parameters": {
        "jsCode": "// CODE NODE 5: Expertise France (UTC +1 / +2 DST)\nfunction formatDate(date) {\n  const year = date.getUTCFullYear();\n  const month = String(date.getUTCMonth() + 1).padStart(2, '0');\n  const day = String(date.getUTCDate()).padStart(2, '0');\n  const hours = String(date.getUTCHours()).padStart(2, '0');\n  const minutes = String(date.getUTCMinutes()).padStart(2, '0');\n  const seconds = String(date.getUTCSeconds()).padStart(2, '0');\n  return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n}\n\nfunction convertFromBeirut(dateString, utcOffset) {\n  const date = new Date(dateString);\n  const utcDate = new Date(date.toLocaleString('en-US', { timeZone: 'UTC' }));\n  const beirutDate = new Date(date.toLocaleString('en-US', { timeZone: 'Asia/Beirut' }));\n  const beirutOffset = utcDate.getTime() - beirutDate.getTime();\n  const utcTime = date.getTime() + beirutOffset;\n  const targetTime = utcTime + (utcOffset * 60 * 60 * 1000);\n  return formatDate(new Date(targetTime));\n}\n\nreturn [{\n  organization: \"Expertise France\",\n  utcOffset: \"UTC +1 (Standard) / UTC +2 (Daylight Saving)\",\n  convertedTime: convertFromBeirut($now, 1)\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -640,
        2560
      ],
      "id": "cfaa3c7a-e84d-42a1-b186-5a9216f3e303",
      "name": "Code7"
    },
    {
      "parameters": {
        "jsCode": "// CODE NODE 5: Expertise France (UTC +1 / +2 DST)\nfunction formatDate(date) {\n  const year = date.getUTCFullYear();\n  const month = String(date.getUTCMonth() + 1).padStart(2, '0');\n  const day = String(date.getUTCDate()).padStart(2, '0');\n  const hours = String(date.getUTCHours()).padStart(2, '0');\n  const minutes = String(date.getUTCMinutes()).padStart(2, '0');\n  const seconds = String(date.getUTCSeconds()).padStart(2, '0');\n  return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n}\n\nfunction convertFromBeirut(dateString, utcOffset) {\n  const date = new Date(dateString);\n  const utcDate = new Date(date.toLocaleString('en-US', { timeZone: 'UTC' }));\n  const beirutDate = new Date(date.toLocaleString('en-US', { timeZone: 'Asia/Beirut' }));\n  const beirutOffset = utcDate.getTime() - beirutDate.getTime();\n  const utcTime = date.getTime() + beirutOffset;\n  const targetTime = utcTime + (utcOffset * 60 * 60 * 1000);\n  return formatDate(new Date(targetTime));\n}\n\nreturn [{\n  organization: \"Expertise France\",\n  utcOffset: \"UTC +1 (Standard) / UTC +2 (Daylight Saving)\",\n  convertedTime: convertFromBeirut($now, 1)\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -700,
        2800
      ],
      "id": "ececf643-7035-4e52-b516-ff39dd9a6a0c",
      "name": "Code8"
    },
    {
      "parameters": {
        "operation": "upsert",
        "schema": {
          "__rl": true,
          "value": "jobs",
          "mode": "list",
          "cachedResultName": "jobs"
        },
        "table": {
          "__rl": true,
          "value": "franceexpertise",
          "mode": "list",
          "cachedResultName": "franceexpertise"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "job_title": "={{ $('Loop Over Items3').item.json.JobTitle }}",
            "deadline": "={{ $('Loop Over Items3').item.json.Deadline }}",
            "job_url": "={{ $('Loop Over Items3').item.json.JobURL }}",
            "location": "={{ $('Loop Over Items3').item.json.Country }}"
          },
          "matchingColumns": [
            "job_url"
          ],
          "schema": [
            {
              "id": "job_title",
              "displayName": "job_title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "job_url",
              "displayName": "job_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "location",
              "displayName": "location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "deadline",
              "displayName": "deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        160,
        3460
      ],
      "id": "5f214b1b-690e-420f-ac2a-08cca359f66b",
      "name": "Postgres( France Expertise )",
      "credentials": {
        "postgres": {
          "id": "hzKdiI9CS5AlLHQw",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "upsert",
        "schema": {
          "__rl": true,
          "value": "jobs",
          "mode": "list",
          "cachedResultName": "jobs"
        },
        "table": {
          "__rl": true,
          "value": "franceexpertise",
          "mode": "list",
          "cachedResultName": "franceexpertise"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "job_url": "={{ $('Loop Over Items').item.json.JobURL }}",
            "location": "={{ $('Loop Over Items').item.json.Country }}",
            "job_title": "={{ $('Loop Over Items').item.json.JobTitle }}",
            "deadline": "={{ $('Loop Over Items').item.json.Deadline }}"
          },
          "matchingColumns": [
            "job_url"
          ],
          "schema": [
            {
              "id": "job_title",
              "displayName": "job_title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "job_url",
              "displayName": "job_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "location",
              "displayName": "location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "deadline",
              "displayName": "deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        220,
        3820
      ],
      "id": "f0d034bf-7757-4be0-8e11-12332af1e09b",
      "name": "Postgres( France Expertise )1",
      "credentials": {
        "postgres": {
          "id": "hzKdiI9CS5AlLHQw",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "upsert",
        "schema": {
          "__rl": true,
          "value": "jobs",
          "mode": "list",
          "cachedResultName": "jobs"
        },
        "table": {
          "__rl": true,
          "value": "franceexpertise",
          "mode": "list",
          "cachedResultName": "franceexpertise"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "job_url": "={{ $json[\"Job URL\"] }}",
            "job_title": "={{ $json[\"Job Title\"] }}",
            "location": "={{ $json.Location }}",
            "deadline": "={{ $json.Deadline }}"
          },
          "matchingColumns": [
            "job_url"
          ],
          "schema": [
            {
              "id": "job_title",
              "displayName": "job_title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "job_url",
              "displayName": "job_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "location",
              "displayName": "location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "deadline",
              "displayName": "deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        400,
        2560
      ],
      "id": "e65c7ba4-fcaf-4197-afde-d4676d14cd90",
      "name": "Postgres( France Expertise )2",
      "credentials": {
        "postgres": {
          "id": "hzKdiI9CS5AlLHQw",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "operation": "upsert",
        "schema": {
          "__rl": true,
          "value": "jobs",
          "mode": "list",
          "cachedResultName": "jobs"
        },
        "table": {
          "__rl": true,
          "value": "franceexpertise",
          "mode": "list",
          "cachedResultName": "franceexpertise"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "job_url": "={{ $json[\"Job URL\"] }}",
            "job_title": "={{ $json[\"Job Title\"] }}",
            "location": "={{ $json.Location }}",
            "deadline": "={{ $json.Deadline }}"
          },
          "matchingColumns": [
            "job_url"
          ],
          "schema": [
            {
              "id": "job_title",
              "displayName": "job_title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "job_url",
              "displayName": "job_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "location",
              "displayName": "location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "deadline",
              "displayName": "deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        340,
        2960
      ],
      "id": "a5e9371b-eae3-4c16-aa52-f50055bc62fd",
      "name": "Postgres( France Expertise )3",
      "credentials": {
        "postgres": {
          "id": "hzKdiI9CS5AlLHQw",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// CODE NODE 4: Asian Development Bank (UTC +8)\nfunction formatDate(date) {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const day = String(date.getDate()).padStart(2, '0');\n  const hours = String(date.getHours()).padStart(2, '0');\n  const minutes = String(date.getMinutes()).padStart(2, '0');\n  const seconds = String(date.getSeconds()).padStart(2, '0');\n  return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n}\n\nfunction convertFromBeirut(dateString, targetTimezone) {\n  // Create a date object and format it for Beirut timezone first\n  const beirutDate = new Date(new Date(dateString).toLocaleString('en-US', { timeZone: 'Asia/Beirut' }));\n  \n  // Get the time in milliseconds\n  const beirutTime = new Date(dateString).getTime();\n  \n  // Convert to target timezone using the original timestamp\n  const targetDate = new Date(new Date(dateString).toLocaleString('en-US', { timeZone: targetTimezone }));\n  \n  return formatDate(targetDate);\n}\n\nreturn [{\n  organization: \"Asian Development Bank (ADB)\",\n  utcOffset: \"UTC +8\",\n  convertedTime: convertFromBeirut($now, 'Asia/Manila')\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        680,
        80
      ],
      "id": "3b70a19c-386c-4442-80e9-0fc0fb42cfaf",
      "name": "Code9"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -660,
        120
      ],
      "id": "5b17eb33-3cdd-4bea-a2ba-3d8e21fb8f3e",
      "name": "Loop Over Items11"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "43e88125-01dd-4b7d-b332-3d20fd7d7173",
              "leftValue": "={{ $json.output.Truth }}",
              "rightValue": "IT related",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        360,
        80
      ],
      "id": "ef93352d-53ba-4fa2-a49a-23df58cc491e",
      "name": "If12"
    },
    {
      "parameters": {
        "text": "=Date in UTC : {{ $json.deadline }}",
        "schemaType": "fromJson",
        "jsonSchemaExample": "{\n  \"Deadline\": \"11/5/2025\"\n}\n",
        "options": {
          "systemPromptTemplate": "Convert the given date and time to the Asia/Beirut timezone.\n\nInput example: 21-Oct-2025 10:30 (GMT-4)\n\nOutput format: ISO 8601 string, e.g., 2025-10-21T17:30:00+03:00\n\nReturn only the converted date in this exact format, with no extra text or explanation"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.informationExtractor",
      "typeVersion": 1,
      "position": [
        -400,
        1500
      ],
      "id": "3b5689e0-ac95-4c91-a101-c14063db6f79",
      "name": "Information Extractor2"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-3.5-turbo",
          "mode": "list",
          "cachedResultName": "gpt-3.5-turbo"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -140,
        1680
      ],
      "id": "e4199df9-6c54-47c7-9cee-8967d730e13a",
      "name": "OpenAI Chat Model3",
      "credentials": {
        "openAiApi": {
          "id": "2MDWCmImtzvTuZSK",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "operation": "upsert",
        "schema": {
          "__rl": true,
          "value": "jobs",
          "mode": "list",
          "cachedResultName": "jobs"
        },
        "table": {
          "__rl": true,
          "value": "adb",
          "mode": "list",
          "cachedResultName": "adb"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "job_title": "={{ $('Information Extractor').item.json.output.Title }}",
            "deadline": "={{ $('Information Extractor').item.json.output.Deadline }}",
            "job_url": "={{ $('Information Extractor').item.json.output.Link }}",
            "location": "={{ $('Loop Over Items11').item.json.Location }}"
          },
          "matchingColumns": [
            "job_url"
          ],
          "schema": [
            {
              "id": "job_title",
              "displayName": "job_title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "job_url",
              "displayName": "job_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "location",
              "displayName": "location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false,
              "removed": false
            },
            {
              "id": "deadline",
              "displayName": "deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        1580,
        140
      ],
      "id": "5773affa-1a32-464a-8e6b-84ad57e8be71",
      "name": "Postgres( ADB )",
      "credentials": {
        "postgres": {
          "id": "hzKdiI9CS5AlLHQw",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "daysInterval": 3
            },
            {}
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -1920,
        2120
      ],
      "id": "3a0c4e27-3b6a-429b-bd3d-647446d61339",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "text": "=Header : {{ $('Loop Over Items7').item.json.JobTitle }}\n\nDescription + deadline : {{ $json.data.modelResponse }}\n\n",
        "schemaType": "fromJson",
        "jsonSchemaExample": "{\n\t\"Job location\": \"California\",\n\t\"Job Title\" : \"IT business analyst\",\n    \"truth\" : \"true\",\n    \"Job Deadline\" : \"2025-11-11T08:01:56.544-05:00\",\n    \"Timezone\" : \"New York\"\n}",
        "options": {
          "systemPromptTemplate": "Given a job description, do the following:\n\nDetermine whether the position is related to Information Technology (IT).\n\nIf the job is IT-related, return \"true\".\n\nIf the job is not IT-related, return \"false\".\n\nExtract the job deadline and the job timezone as well.\n\nReturn all the data in english"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.informationExtractor",
      "typeVersion": 1,
      "position": [
        -220,
        2120
      ],
      "id": "d00a2730-c3d7-4699-acfa-f7baa070988c",
      "name": "Information Extractor1"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-3.5-turbo",
          "mode": "list",
          "cachedResultName": "gpt-3.5-turbo"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -80,
        2320
      ],
      "id": "24cb087a-db9e-4e93-b964-35c487b857ee",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "2MDWCmImtzvTuZSK",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "e8643e44-2ee4-4539-a3ef-b19a45518ef1",
              "leftValue": "={{ $('Information Extractor1').item.json.output.truth }}",
              "rightValue": "true",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        560,
        2120
      ],
      "id": "ebf83155-ad3b-43bd-883c-1c92f16bb8f3",
      "name": "If13"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -640,
        2120
      ],
      "id": "6da3611d-a44f-4605-b72e-5b32d744392e",
      "name": "Wait11",
      "webhookId": "c4227575-0047-4791-8629-c739f2a8f1e5"
    },
    {
      "parameters": {
        "operation": "upsert",
        "schema": {
          "__rl": true,
          "value": "jobs",
          "mode": "list",
          "cachedResultName": "jobs"
        },
        "table": {
          "__rl": true,
          "value": "europeancommission",
          "mode": "list",
          "cachedResultName": "europeancommission"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "job_url": "={{ $json.Link }}",
            "job_title": "={{ $json.Title }}",
            "location": "={{ $json.Location }}",
            "deadline": "={{ $json.Deadline }}"
          },
          "matchingColumns": [
            "job_url"
          ],
          "schema": [
            {
              "id": "job_title",
              "displayName": "job_title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "job_url",
              "displayName": "job_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "location",
              "displayName": "location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            },
            {
              "id": "deadline",
              "displayName": "deadline",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        540,
        380
      ],
      "id": "661acac6-5296-4f98-b66a-f01a8083bfaa",
      "name": "Postgres",
      "credentials": {
        "postgres": {
          "id": "hzKdiI9CS5AlLHQw",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "text": "=Dates : {{ $json.deadline }}",
        "schemaType": "fromJson",
        "jsonSchemaExample": "{\n  \"Deadline\": \"11/5/2025\"\n}\n",
        "options": {
          "systemPromptTemplate": "Convert the given date and time to the Asia/Beirut timezone.\n\nInput example: 21-Oct-2025 10:30 (GMT-4)\n\nOutput format: ISO 8601 string, e.g., 2025-10-21T17:30:00+03:00\n\nReturn only the converted date in this exact format, with no extra text or explanation."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.informationExtractor",
      "typeVersion": 1,
      "position": [
        -660,
        1860
      ],
      "id": "79fc104e-28ad-4c76-9c7c-2318c0f5f559",
      "name": "Information Extractor3"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-3.5-turbo",
          "mode": "list",
          "cachedResultName": "gpt-3.5-turbo"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -640,
        1980
      ],
      "id": "0cd0251c-6fce-410e-85da-ed275ec5622b",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "2MDWCmImtzvTuZSK",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Airtop replacement for ADB - Extract ALL page text\nconst puppeteer = require('puppeteer');\n\nasync function extractADBJobDescription(jobUrl) {\n  let browser;\n  \n  try {\n    browser = await puppeteer.launch({\n      headless: true,\n      args: [\n        '--no-sandbox',\n        '--disable-setuid-sandbox',\n        '--disable-dev-shm-usage',\n        '--disable-gpu'\n      ]\n    });\n    \n    const page = await browser.newPage();\n    await page.setUserAgent('Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36');\n    \n    console.log(`Navigating to: ${jobUrl}`);\n    await page.goto(jobUrl, { \n      waitUntil: 'networkidle2', \n      timeout: 30000 \n    });\n    \n    await new Promise(resolve => setTimeout(resolve, 3000));\n    \n    // Extract ALL text from the page\n    const pageText = await page.evaluate(() => {\n      // Remove script, style, and other non-content elements\n      const elementsToRemove = document.querySelectorAll('script, style, noscript, iframe, svg');\n      elementsToRemove.forEach(el => el.remove());\n      \n      // Get all text from body\n      const bodyText = document.body.innerText || document.body.textContent;\n      \n      // Clean up the text\n      const cleanedText = bodyText\n        .split('\\n')\n        .map(line => line.trim())\n        .filter(line => line.length > 0)\n        .join('\\n');\n      \n      return cleanedText || 'No text found on page';\n    });\n    \n    await browser.close();\n    \n    return {\n      modelResponse: pageText\n    };\n    \n  } catch (error) {\n    if (browser) await browser.close();\n    console.error('Error extracting page text:', error);\n    return {\n      modelResponse: 'Error extracting page text'\n    };\n  }\n}\n\n// Main execution\nconst jobUrl = $json.Link;\nconst result = await extractADBJobDescription(jobUrl);\n\nreturn [{\n  json: {\n    data: result\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -340,
        80
      ],
      "id": "5e4b95ca-9302-4dca-baeb-3ab14825adf5",
      "name": "Code"
    },
    {
      "parameters": {
        "jsCode": "// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nfor (const item of $input.all()) {\n  item.json.myNewField = 1;\n}\n\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -620,
        1480
      ],
      "id": "9f595f3b-ebd9-4daa-bb81-1a79ac7867d2",
      "name": "Code10"
    },
    {
      "parameters": {
        "jsCode": "// Airtop replacement for UNDP - Extract ALL page text\nconst puppeteer = require('puppeteer');\n\nasync function extractUNDPJobDetails(jobUrl) {\n  let browser;\n  \n  try {\n    browser = await puppeteer.launch({\n      headless: true,\n      args: [\n        '--no-sandbox',\n        '--disable-setuid-sandbox',\n        '--disable-dev-shm-usage',\n        '--disable-gpu'\n      ]\n    });\n    \n    const page = await browser.newPage();\n    await page.setUserAgent('Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36');\n    \n    console.log(`Navigating to: ${jobUrl}`);\n    await page.goto(jobUrl, { \n      waitUntil: 'networkidle2', \n      timeout: 30000 \n    });\n    \n    await new Promise(resolve => setTimeout(resolve, 3000));\n    \n    // Extract ALL text from the page\n    const pageText = await page.evaluate(() => {\n      // Remove script, style, and other non-content elements\n      const elementsToRemove = document.querySelectorAll('script, style, noscript, iframe, svg');\n      elementsToRemove.forEach(el => el.remove());\n      \n      // Get all text from body\n      const bodyText = document.body.innerText || document.body.textContent;\n      \n      // Clean up the text\n      const cleanedText = bodyText\n        .split('\\n')\n        .map(line => line.trim())\n        .filter(line => line.length > 0)\n        .join('\\n');\n      \n      return cleanedText || 'No text found on page';\n    });\n    \n    await browser.close();\n    \n    return {\n      modelResponse: pageText\n    };\n    \n  } catch (error) {\n    if (browser) await browser.close();\n    console.error('Error extracting UNDP page text:', error);\n    return {\n      modelResponse: 'Error extracting page text'\n    };\n  }\n}\n\n// Main execution\nconst jobUrl = $json.JobURL;\nconst result = await extractUNDPJobDetails(jobUrl);\n\nreturn [{\n  json: {\n    data: result\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -460,
        2120
      ],
      "id": "f5cec871-d7d7-431d-b5f2-02254711eb18",
      "name": "Code11"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-3.5-turbo",
          "mode": "list",
          "cachedResultName": "GPT-3.5-TURBO"
        },
        "messages": {
          "values": [
            {
              "content": "=Convert this date to Asia/Beirut Timezone.\n\nReturn the new converted date to ISO format only.\n\nDate :  {{ $json.output[\"Job Deadline\"] }}\n\nTimezone : {{ $json.output.Timezone }}"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        160,
        2120
      ],
      "id": "992e82c7-97d6-492c-a04a-c43fd3121302",
      "name": "OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "2MDWCmImtzvTuZSK",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        700,
        3100
      ],
      "typeVersion": 1,
      "id": "cf4c07e8-c71c-41c1-9a7e-535f85f9abce",
      "name": "Sticky Note"
    }
  ],
  "pinData": {},
  "connections": {
    "ADB (Description you need to an information extraction node or filter because the job url does not modify with the filtered job fields": {
      "main": [
        [
          {
            "node": "Loop Over Items11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items3": {
      "main": [
        [],
        [
          {
            "node": "Code5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Wait6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items4": {
      "main": [
        [],
        [
          {
            "node": "Code7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Wait8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Expertise France ( Domaine Enesignement De Recherche )": {
      "main": [
        [
          {
            "node": "Loop Over Items4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items5": {
      "main": [
        [],
        [
          {
            "node": "Code8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If2": {
      "main": [
        [
          {
            "node": "Wait10",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Expertise France ( Domaine Justice )": {
      "main": [
        [
          {
            "node": "Loop Over Items5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Expertise France ( Domaine Innovation Technologique )": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [],
        [
          {
            "node": "Code6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If3": {
      "main": [
        [
          {
            "node": "Wait7",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Expertise France ( Domaine System D'information )": {
      "main": [
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items6": {
      "main": [
        [],
        [
          {
            "node": "Information Extractor3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items7": {
      "main": [
        [],
        [
          {
            "node": "Wait11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If6": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items1": {
      "main": [
        [],
        [
          {
            "node": "Code10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If7": {
      "main": [
        [
          {
            "node": "Wait5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "UNGM": {
      "main": [
        [
          {
            "node": "Loop Over Items6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "UNDP": {
      "main": [
        [
          {
            "node": "Loop Over Items7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items8": {
      "main": [
        [],
        [
          {
            "node": "Code3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If4": {
      "main": [
        [
          {
            "node": "Wait4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code3",
            "type": "main",
            "index": 0
          },
          {
            "node": "Loop Over Items8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items9": {
      "main": [
        [],
        [
          {
            "node": "Code1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If8": {
      "main": [
        [
          {
            "node": "Wait2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items10": {
      "main": [
        [],
        [
          {
            "node": "Code2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If9": {
      "main": [
        [
          {
            "node": "Wait3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If10": {
      "main": [
        [
          {
            "node": "Wait9",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GIZ": {
      "main": [
        [
          {
            "node": "Loop Over Items8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "EU-europa(Also use the information extractor to filter it jobs from non it jobs)": {
      "main": [
        [
          {
            "node": "If11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Information Extractor": {
      "main": [
        [
          {
            "node": "If12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "WorldBank": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "Information Extractor",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AFD ( bedda sheghel )": {
      "main": [
        [
          {
            "node": "Loop Over Items10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "EU Europa": {
      "main": [
        [
          {
            "node": "Postgres",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If5": {
      "main": [
        [
          {
            "node": "Wait1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AFD": {
      "main": [
        [
          {
            "node": "Postgres( AFD )",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GIZ1": {
      "main": [
        [
          {
            "node": "Postgres( GIZ )",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "World Bank": {
      "main": [
        [
          {
            "node": "Postgres( World Bank )",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "UNGM2": {
      "main": [
        [
          {
            "node": "Postgres( UNGM )",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "France Expertise": {
      "main": [
        [
          {
            "node": "Postgres( France Expertise )",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ADB": {
      "main": [
        [
          {
            "node": "Postgres( ADB )",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "France Expertise2": {
      "main": [
        [
          {
            "node": "Postgres( France Expertise )1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "France Expertise3": {
      "main": [
        [
          {
            "node": "Postgres( France Expertise )2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "France Expertise1": {
      "main": [
        [
          {
            "node": "Postgres( France Expertise )3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "UNDP1": {
      "main": [
        [
          {
            "node": "Postgres( UNPD )1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If11": {
      "main": [
        [
          {
            "node": "Loop Over Items9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "UNDP1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait1": {
      "main": [
        [
          {
            "node": "UNGM2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres( AFD )": {
      "main": [
        [
          {
            "node": "Loop Over Items10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres( GIZ )": {
      "main": [
        [
          {
            "node": "Loop Over Items8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres( World Bank )": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres( UNGM )": {
      "main": [
        [
          {
            "node": "Loop Over Items6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code1": {
      "main": [
        [
          {
            "node": "If8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres( UNPD )1": {
      "main": [
        [
          {
            "node": "Loop Over Items7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait2": {
      "main": [
        [
          {
            "node": "EU Europa",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait3": {
      "main": [
        [
          {
            "node": "AFD",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait4": {
      "main": [
        [
          {
            "node": "GIZ1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait5": {
      "main": [
        [
          {
            "node": "World Bank",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait6": {
      "main": [
        [
          {
            "node": "France Expertise",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait7": {
      "main": [
        [
          {
            "node": "France Expertise2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait8": {
      "main": [
        [
          {
            "node": "France Expertise3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait10": {
      "main": [
        [
          {
            "node": "France Expertise1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait9": {
      "main": [
        [
          {
            "node": "ADB",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code2": {
      "main": [
        [
          {
            "node": "If9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code3": {
      "main": [
        [
          {
            "node": "If4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code4": {
      "main": [
        [
          {
            "node": "If7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code5": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code6": {
      "main": [
        [
          {
            "node": "If3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code7": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code8": {
      "main": [
        [
          {
            "node": "If2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres( France Expertise )": {
      "main": [
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres( France Expertise )1": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres( France Expertise )2": {
      "main": [
        [
          {
            "node": "Loop Over Items4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres( France Expertise )3": {
      "main": [
        [
          {
            "node": "Loop Over Items5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code9": {
      "main": [
        [
          {
            "node": "If10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items11": {
      "main": [
        [],
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If12": {
      "main": [
        [
          {
            "node": "Code9",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "Information Extractor2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Information Extractor2": {
      "main": [
        [
          {
            "node": "Code4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres( ADB )": {
      "main": [
        [
          {
            "node": "Loop Over Items11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Expertise France ( Domaine Enesignement De Recherche )",
            "type": "main",
            "index": 0
          },
          {
            "node": "Expertise France ( Domaine Justice )",
            "type": "main",
            "index": 0
          },
          {
            "node": "ADB (Description you need to an information extraction node or filter because the job url does not modify with the filtered job fields",
            "type": "main",
            "index": 0
          },
          {
            "node": "Expertise France ( Domaine System D'information )",
            "type": "main",
            "index": 0
          },
          {
            "node": "Expertise France ( Domaine Innovation Technologique )",
            "type": "main",
            "index": 0
          },
          {
            "node": "UNDP",
            "type": "main",
            "index": 0
          },
          {
            "node": "UNGM",
            "type": "main",
            "index": 0
          },
          {
            "node": "WorldBank",
            "type": "main",
            "index": 0
          },
          {
            "node": "GIZ",
            "type": "main",
            "index": 0
          },
          {
            "node": "AFD ( bedda sheghel )",
            "type": "main",
            "index": 0
          },
          {
            "node": "EU-europa(Also use the information extractor to filter it jobs from non it jobs)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Information Extractor1": {
      "main": [
        [
          {
            "node": "OpenAI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Information Extractor1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "If13": {
      "main": [
        [
          {
            "node": "If6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait11": {
      "main": [
        [
          {
            "node": "Code11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres": {
      "main": [
        [
          {
            "node": "Loop Over Items9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Information Extractor3": {
      "main": [
        [
          {
            "node": "If5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Information Extractor3",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "Information Extractor",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code10": {
      "main": [
        [
          {
            "node": "Information Extractor2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code11": {
      "main": [
        [
          {
            "node": "Information Extractor1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI": {
      "main": [
        [
          {
            "node": "If13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "e003b5a2-e869-41dd-bf25-9b9ad3a1822b",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "9a277384d533ab74ed5dda8a68dbd86e8f9ac8c0f284634c3e5ce5bc97fab3ec"
  },
  "id": "a7pGT7znJhyqZYJx",
  "tags": []
}
